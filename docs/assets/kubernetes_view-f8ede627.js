import{d as U,u as A,r as c,a as B,b as r,o as w,c as M,w as t,g as v,e as _,f as o,m as g,j as V,k as P,n as W,_ as j,l as q,F as x}from"./index-df6f743d.js";import{c as b,e as y,f as E,a as F,P as H}from"./tf_deployment_list.vue_vue_type_script_setup_true_lang-1803a4f6.js";import{_ as K}from"./expandable_layout.vue_vue_type_script_setup_true_lang-235dc857.js";import"./list_table.vue_vue_type_script_setup_true_lang-046c7938.js";const I=V("a",{href:"https://manual.grid.tf/weblets/weblets_k8s.html",target:"_blank",class:"app-link"}," Quick start documentation ",-1),R={name:"TfKubernetes",components:{K8SWorker:b,ExpandableLayout:K}},z=U({...R,setup(T){const l=A(),f=c(),p=B(),u=c("K8S"+v(8)),i=c(v(10)),d=c(y("MR"+v(9))),n=c([]);function S(){n.value.push(y())}async function L(){l.value.setStatus("deploy");try{const a=await P(p.profile);await l.value.validateBalance(a);const s=await E(a,{name:u.value,clusterToken:i.value,master:d.value,workers:n.value,sshKey:p.profile.ssh});l.value.reloadDeploymentsList(),l.value.setStatus("success","Successfully deployed a Kubernetes cluster."),l.value.openDialog(s,{SSH_KEY:"Public SSH Key"})}catch(a){l.value.setStatus("failed",W(a,"Failed to deploy kubernetes cluster."))}}return(a,s)=>{const h=r("v-text-field"),k=r("input-validator"),N=r("password-input-wrapper"),$=r("d-tabs"),D=r("v-btn"),C=r("weblet-layout");return w(),M(C,{ref_key:"layout",ref:l},{title:t(()=>[_("Deploy a Kubernetes")]),subtitle:t(()=>[_(" Kubernetes is the standard container orchestration tool. On the TF grid, Kubernetes clusters can be deployed out of the box. We have implemented K3S, a full-blown Kubernetes offering that uses only half of the memory footprint. It is packaged as a single binary and made more lightweight to run workloads in resource-constrained locations (fits e.g. IoT, edge, ARM workloads). "),I]),"footer-actions":t(()=>{var e;return[o(D,{variant:"tonal",color:"primary",onClick:L,disabled:(e=f.value)==null?void 0:e.invalid},{default:t(()=>[_(" Deploy ")]),_:1},8,["disabled"])]}),default:t(()=>[o($,{tabs:[{title:"Config",value:"config"},{title:"Master",value:"master"},{title:"Workers",value:"workers"}],ref_key:"tabs",ref:f},{config:t(()=>[o(k,{value:u.value,rules:[a.validators.required("Name is required."),e=>a.validators.isAlpha("Name must start with alphabet char.")(e[0]),a.validators.isAlphanumeric("Name should consist of alphabets & numbers only."),a.validators.minLength("Name minimum length is 2 chars.",2),a.validators.maxLength("Name max length is 15 chars.",15)]},{default:t(({props:e})=>[o(h,g({label:"Name",modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=m=>u.value=m)},e),null,16,["modelValue"])]),_:1},8,["value","rules"]),o(k,{value:i.value,rules:[a.validators.required("Token is required."),a.validators.minLength("Token minimum length is 6 chars.",6),a.validators.maxLength("Token max length is 15 chars.",15),a.validators.isAlphanumeric("Token cannot contain any characters other than alphabets and numbers.")]},{default:t(({props:e})=>[o(N,null,{default:t(()=>[o(h,g({label:"Cluster Token"},e,{modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=m=>i.value=m)}),null,16,["modelValue"])]),_:2},1024)]),_:1},8,["value","rules"])]),master:t(()=>[o(b,{modelValue:d.value,"onUpdate:modelValue":s[2]||(s[2]=e=>d.value=e)},null,8,["modelValue"])]),workers:t(()=>[o(K,{modelValue:n.value,"onUpdate:modelValue":s[3]||(s[3]=e=>n.value=e),onAdd:S},{default:t(({index:e})=>[o(b,{modelValue:n.value[e],"onUpdate:modelValue":m=>n.value[e]=m},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["modelValue"])]),_:1},512)]),_:1},512)}}}),G={name:"KubernetesView",components:{TfKubernetes:z,TfDeploymentList:F},setup(){return{name:H.Kubernetes}}},O={class:"mt-4"};function Q(T,l,f,p,u,i){const d=r("TfKubernetes"),n=r("TfDeploymentList");return w(),q(x,null,[o(d),V("div",O,[o(n,{"project-name":p.name},null,8,["project-name"])])],64)}const ee=j(G,[["render",Q]]);export{ee as default};
