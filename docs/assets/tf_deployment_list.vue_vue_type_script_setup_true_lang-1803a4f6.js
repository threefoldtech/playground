var at=Object.defineProperty;var ot=(t,e,a)=>e in t?at(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var ke=(t,e,a)=>(ot(t,typeof e!="symbol"?e+"":e,a),a);import{g as pe,N as nt,E as Ee,M as lt,G as rt,Q as st,H as it,I as ut,J as dt,d as U,r as w,p as K,B as ve,b as _,o as h,c as $,a as x,l as V,f as s,w as i,j as M,k as j,K as ct,L as Q,m as L,O as mt,n as Ie,e as b,t as k,q as z,P as pt,R as vt,v as le,F,S as ft,T as yt,U as _t,V as bt,W as gt,s as Me,A as wt,h as re,X as St,Y as It,Z as ht,C as Pt}from"./index-df6f743d.js";import{f as $e,_ as q}from"./list_table.vue_vue_type_script_setup_true_lang-046c7938.js";class Oe{constructor(){ke(this,"nodes",new Map)}async pick(e){let a=[-1,Number.MAX_SAFE_INTEGER];for(const n of e){const o=+n.nodeId;if(this.nodes.has(o)){const u=this.nodes.get(o);u<a[1]&&(a=[o,u])}else return this.nodes.set(o,1),console.log("%c picked nodeId: "+o,"color: steelblue"),o}return this.nodes.set(a[0],a[1]+1),console.log("%c picked nodeId: "+a[0],"color: steelblue"),a[0]}}function Re(t={}){const e=new nt;return e.name=t.name||"NW"+pe(10),e.ip_range=t.ipRange||"10.20.0.0/16",e.addAccess=t.addAccess||!1,e}async function Qa(t,e){const a=new Oe,n=new lt;return n.name=e.name,n.network=Re(e.network),n.machines=await Promise.all(e.machines.map(o=>kt(t,o,a))),n.metadata=e.metadata,n.description=e.description,await t.machines.deploy(n),fe(t,n.name)}async function fe(t,e){const a=await t.machines.getObj(e);return a.deploymentName=e,a}async function kt(t,e,a){var u,l;const n={cru:e.cpu,mru:Math.round(e.memory/1024),country:e.country,farmId:e.farmId,farmName:e.farmName,hru:(u=e.qsfsDisks)==null?void 0:u.reduce((m,d)=>m+d.cache,0),sru:(l=e.disks)==null?void 0:l.reduce((m,d)=>m+d.size,e.rootFilesystemSize||0),publicIPs:e.publicIpv4,availableFor:t.twinId},o=new rt;return o.name=e.name,o.node_id=await a.pick(await t.capacity.filterNodes(n)),o.disks=Ve(e.disks),o.public_ip=e.publicIpv4||!1,o.public_ip6=e.publicIpv6||!1,o.planetary=e.planetary||!0,o.cpu=e.cpu,o.memory=e.memory,o.rootfs_size=e.rootFilesystemSize||0,o.flist=e.flist,o.entrypoint=e.entryPoint,o.env=Ae(e.envs),o.solutionProviderID=1,o.qsfs_disks=Te(e.qsfsDisks),o}function Te(t=[]){return t.map(e=>{const a=new st;return a.name=e.name,a.cache=e.cache,a.mountpoint=e.mountpoint,a.encryption_key=e.encryption_key||e.name,a.prefix=e.prefix||e.name,a.qsfs_zdbs_name=e.zdbsName||e.name,a})}function Ae(t=[]){return t.reduce((e,a)=>(e[a.key]=a.value,e),{})}function Ve(t=[]){return t.map(e=>{const a=new it;return a.name=e.name||"DS"+pe(10),a.size=e.size,a.mountpoint=e.mountPoint,a})}async function Ct(t,e){var o,u;console.log(e);const a={cru:e.cpu,mru:Math.round(e.memory/1024),country:e.country,farmId:e.farmId,farmName:e.farmName,hru:(o=e.qsfsDisks)==null?void 0:o.reduce((l,m)=>l+m.cache,0),sru:(u=e.disks)==null?void 0:u.reduce((l,m)=>l+m.size,e.rootFilesystemSize||0),publicIPs:e.publicIpv4,availableFor:t.twinId},n=new ut;return n.deployment_name=e.deploymentName,n.cpu=e.cpu,n.memory=e.memory,n.disks=Ve(e.disks),n.node_id=+Ee(await t.capacity.filterNodes(a)).nodeId,n.public_ip=e.publicIpv4||!1,n.public_ip6=e.publicIpv6||!1,n.name=e.name,n.planetary=e.planetary||!0,n.flist=e.flist,n.entrypoint=e.entryPoint,n.qsfs_disks=Te(e.qsfsDisks),n.rootfs_size=e.rootFilesystemSize||0,n.env=Ae(e.envs),n.solutionProviderID=1,await t.machines.add_machine(n),fe(t,e.deploymentName)}async function Nt(t,e){const a=new dt;a.deployment_name=e.deploymentName,a.name=e.name;const n=await t.machines.delete_machine(a);if(!n.deleted&&!n.updated)throw new Error("Failed to delete machine");return n}var E=(t=>(t.Kubernetes="Kubernetes",t.Caprover="CapRover",t.Discourse="Discourse",t.Funkwhale="Funkwhale",t.Mastodon="Mastodon",t.Mattermost="Mattermost",t.Owncloud="Owncloud",t.Peertube="Peertube",t.Subsquid="Subsquid",t.Taiga="Taiga",t.Wordpress="Wordpress",t.Gateway="GatewayName",t.QVM="Qvm",t.TFhubValidator="TFhubValidator",t.Casperlabs="Casperlabs",t.Presearch="Presearch",t.VM="VM",t.NodePilot="NodePilot",t.Fullvm="Fullvm",t.Algorand="Algorand",t.Qvm="Qvm",t.Umbrel="Umbrel",t))(E||{}),Ue=(t=>(t.Peertube="pt",t.Funkwhale="fw",t.Taiga="tg",t.Discourse="dc",t.Owncloud="oc",t.Mattermost="mm",t.Mastodon="md",t.TFhubValidator="tfvalidator",t.Casperlabs="cl",t.Presearch="ps",t.CapRover="cp",t.Kubernetes="k8s",t.Machines="vm",t.VM="vm",t.NodePilot="np",t.Fullvm="fvm",t.Subsquid="ss",t.Algorand="al",t.Qvm="qvm",t.Umbrel="um",t.Wordpress="wp",t))(Ue||{});function we(t){throw new Error(t)}function ce(t){Object.keys(t).length===0&&we("[Object] must contain at least 1 field.");for(const e in t)t[e]instanceof Object?ce(t[e]):t[e]!==!0&&we(`Expected "${e}" of type [true | string] but got [${typeof t[e]}]`)}function Dt(t){(t===""||t===void 0||t===null)&&we(`Expected a valid [ID] but got [${t}].`)}const Et={nodes:"nodesConnection",accounts:"accountsConnection",burnTransactions:"burnTransactionsConnection",cities:"citiesConnection",contractBillReports:"contractBillReportsConnection",contractResources:"contractResourcesConnection",countries:"countriesConnection",entityProofs:"entityProofsConnection",farmingPolicies:"farmingPoliciesConnection",farms:"farmsConnection",historicalBalances:"historicalBalancesConnection",interfaces:"interfacesConnection",locations:"locationsConnection",mintTransactions:"mintTransactionsConnection",nameContracts:"nameContractsConnection",nodeContracts:"nodeContractsConnection",nodeResourcesTotals:"nodeResourcesTotalsConnection",nruConsumptions:"nruConsumptionsConnection",pricingPolicies:"pricingPoliciesConnection",publicConfigs:"publicConfigsConnection",publicIps:"publicIpsConnection",refundTransactions:"refundTransactionsConnection",rentContracts:"rentContractsConnection",solutionProviders:"solutionProvidersConnection",transfers:"transfersConnection",twins:"twinsConnection",uptimeEvents:"uptimeEventsConnection"},Mt={nodesConnection:"Node",accountsConnection:"Account",burnTransactionsConnection:"BurnTransaction",citiesConnection:"City",contractBillReportsConnection:"ContractBillReport",contractResourcesConnection:"ContractResources",countriesConnection:"Country",entityProofsConnection:"EntityProof",farmingPoliciesConnection:"FarmingPolicy",farmsConnection:"Farm",historicalBalancesConnection:"HistoricalBalance",interfacesConnection:"Interfaces",locationsConnection:"Location",mintTransactionsConnection:"MintTransaction",nameContractsConnection:"NameContract",nodeContractsConnection:"NodeContract",nodeResourcesTotalsConnection:"NodeResourcesTotal",nruConsumptionsConnection:"NruConsumption",pricingPoliciesConnection:"PricingPolicy",publicConfigsConnection:"PublicConfig",publicIpsConnection:"PublicIp",refundTransactionsConnection:"RefundTransaction",rentContractsConnection:"RentContract",solutionProvidersConnection:"SolutionProvider",transfersConnection:"Transfer",twinsConnection:"Twin",uptimeEventsConnection:"UptimeEvent"};let $t=class ne{_list(e){ce(e.fields);const{name:a,entity:n,limit:o,offset:u,orderBy:l,where:m,fields:d}=e,c=`
      ${a}(
        limit: $limit${a},
        offset: $offset${a},
        orderBy: $orderBy${a},
        where: $where${a},
      ) {
        ${ne.normalizeFields(d)}
      }
    `;return{name:a,parameters:[`$limit${a}: Int`,`$offset${a}: Int`,`$orderBy${a}: [${n}OrderByInput!]`,`$where${a}: ${n}WhereInput`],query:c,variables:{[`limit${a}`]:o,[`offset${a}`]:u,[`orderBy${a}`]:l,[`where${a}`]:m}}}_byId(e,a,n){Dt(e),ce(a);const o=`
      ${n}(id: $id${n}) {
        ${ne.normalizeFields(a)}
      }
    `;return{name:n,parameters:[`$id${n}: ID!`],query:o,variables:{[`id${n}`]:e}}}_connection(e,a,n){ce(e);const o=Mt[n],u=[`$after${n}: String`,`$first${n}: Int`,`$orderBy${n}: [${o}OrderByInput!]!`,`$where${n}: ${o}WhereInput`],l=`
      ${n}(
        after: $after${n},
        first: $first${n},
        orderBy: $orderBy${n},
        where: $where${n}
      ) {
        ${ne.normalizeFields(e)}
      }
    `;return{name:n,query:l,parameters:u,variables:{[`after${n}`]:a.after,[`first${n}`]:a.first,[`orderBy${n}`]:a.orderBy,[`where${n}`]:a.where}}}static normalizeFields(e){return Object.entries(e).reduce((a,[n,o])=>(a.push(o===!0?n:`${n}{${ne.normalizeFields(o)}}`),a),[]).join(",")}};const Ot={Node:"nodes",Account:"accounts",BurnTransaction:"burnTransactions",City:"cities",ContractBillReport:"contractBillReports",ContractResources:"contractResources",Country:"countries",EntityProof:"entityProofs",FarmingPolicy:"farmingPolicies",Farm:"farms",HistoricalBalance:"historicalBalances",Interfaces:"interfaces",Location:"locations",MintTransaction:"mintTransactions",NameContract:"nameContracts",NodeContract:"nodeContracts",NodeResourcesTotal:"nodeResourcesTotals",NruConsumption:"nruConsumptions",PricingPolicy:"pricingPolicies",PublicConfig:"publicConfigs",PublicIp:"publicIps",RefundTransaction:"refundTransactions",RentContract:"rentContracts",SolutionProvider:"solutionProviders",Transfer:"transfers",Twin:"twins",UptimeEvent:"uptimeEvents"},Rt={nodes:"nodeById",accounts:"accountById",burnTransactions:"burnTransactionById",cities:"cityById",contractBillReports:"contractBillReportById",contractResources:"contractResourcesById",countries:"countryById",entityProofs:"entityProofById",farmingPolicies:"farmingPolicyById",farms:"farmById",historicalBalances:"historicalBalanceById",interfaces:"interfacesById",locations:"locationById",mintTransactions:"mintTransactionById",nameContracts:"nameContractById",nodeContracts:"nodeContractById",nodeResourcesTotals:"nodeResourcesTotalById",nruConsumptions:"nruConsumptionById",pricingPolicies:"pricingPolicyById",publicConfigs:"publicConfigById",publicIps:"publicIpById",refundTransactions:"refundTransactionById",rentContracts:"rentContractById",solutionProviders:"solutionProviderById",transfers:"transferById",twins:"twinById",uptimeEvents:"uptimeEventById"};var Se;(function(t){t.Dev="dev",t.Test="test",t.Qa="qa",t.Main="main"})(Se||(Se={}));class J extends $t{constructor(e){super(),this.__uri=e===Se.Main?"https://graphql.grid.tf/graphql":`https://graphql.${e}.grid.tf/graphql`}async _request(e){const{name:a,parameters:n,query:o,variables:u}=e,l=n&&n.length?`(${n.join(", ")})`:"",m=await fetch(this.__uri,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({query:`
          query TFGridClientQuery${l} {
            ${o}
          }
        `,variables:u})}),{data:d}=await m.json();return a?d[a]:d}merge(e){const a=[];for(const o in e)a.push(this[`__${o}`].apply(this,e[o]));const n=a.reduce((o,{parameters:u,query:l,variables:m})=>(o.parameters=[...o.parameters,...u],o.query+=` ${l}`,o.variables=Object.assign(Object.assign({},o.variables),m),o),{name:null,parameters:[],query:"",variables:{}});return this._request(n)}}for(const[t,e]of Object.entries(Ot))Object.defineProperty(J.prototype,`__${e}`,{value(a,n){return this._list(Object.assign({name:e,entity:t,fields:a},n))}}),Object.defineProperty(J.prototype,e,{value(a,n){return this._request(this[`__${e}`](a,n))}});for(const t of Object.values(Rt))Object.defineProperty(J.prototype,`__${t}`,{value(e,a){return this._byId(e,a,t)}}),Object.defineProperty(J.prototype,t,{value(e,a){return this._request(this[`__${t}`](e,a))}});for(const t of Object.values(Et))Object.defineProperty(J.prototype,`__${t}`,{value(e,a){return this._connection(e,a,t)}}),Object.defineProperty(J.prototype,t,{value(e,a){return this._request(this[`__${t}`](e,a))}});function Tt(t){return t[0].toLocaleUpperCase()+t.slice(1)}function Be(t,e){return t>=e}async function de(t){const e=t.headers.get("count");return{count:e?+e:null,data:await t.json()}}function At(t){return Le(t)&&t===parseInt(t.toString(),10)}function Vt(t){return typeof t=="string"}function Le(t){return typeof t=="number"}function Ut(t){return typeof t=="boolean"}function G(t,e){const a=Tt(typeof t);throw new Error(`Expected argument of type [${e}] but got [${a}] with value (${t}).`)}function Bt(t){!Le(t)&&G(t,"Number")}function Fe(t){Bt(t),!At(t)&&G(t,"Int")}function N(t){Fe(t),!Be(t,0)&&G(t,"Natural")}function T(t){Fe(t),!Be(t,1)&&G(t,"ID")}function A(t){!Vt(t)&&G(t,"String")}function X(t,e){!e.includes(t)&&G(t,`domain(${e.map(a=>'"'+a+'"').join(", ")})`)}function R(t){!Ut(t)&&G(t,"Boolean")}function he(t,e){!e.test(t)&&G(t,`${e}`)}class ee{constructor(e){this.__mapper=e.mapper,this.__validator=e.validator,this.__queries=e.queries;const a=this;for(const n of Object.keys(a.__mapper))Object.defineProperty(a,n,{value(o){return a.__queries[n]=o,a}})}async build(e){A(e),he(e,/^\//);const a=[];for(const o in this.__queries)this.__queries[o]===void 0||this.__queries[o]===null||this.__queries[o]===""||(this.__validator[o](this.__queries[o]),a.push(`${this.__mapper[o]}=${this.__queries[o]}`));const n=a.length>0?`?${a.join("&")}`:"";return fetch(`${this.uri}${e}${n}`)}}var se;(function(t){t.Node="node",t.Name="name",t.Rent="rent"})(se||(se={}));var ie;(function(t){t.Created="Created",t.GracePeriod="GracePeriod",t.Deleted="Deleted"})(ie||(ie={}));const Lt={page:"page",size:"size",retCount:"ret_count",contractId:"contract_id",twinId:"twin_id",nodeId:"node_id",name:"name",type:"type",state:"state",deploymentData:"deployment_data",deploymentHash:"deployment_hash",numberOfPublicIps:"number_of_public_ips"},Ft={page:N,size:N,retCount:R,contractId:T,twinId:T,nodeId:T,name:A,type(t){A(t),X(t,[se.Name,se.Node,se.Rent])},state(t){A(t),X(t,[ie.Created,ie.GracePeriod,ie.Deleted])},deploymentData:A,deploymentHash:A,numberOfPublicIps:N};class Wt extends ee{constructor(e,a={}){super({mapper:Lt,validator:Ft,queries:a}),this.uri=e}}var me;(function(t){t.Diy="DIY",t.Certified="Certified",t.NotCertified="NotCertified"})(me||(me={}));const Kt={page:"page",size:"size",retCount:"ret_count",freeIps:"free_ips",certificationType:"certification_type",version:"version",dedicated:"dedicated",farmId:"farm_id",name:"name",nameContains:"name_contains",pricingPolicyId:"pricing_policy_id",stellarAddress:"stellar_address",totalIps:"total_ips",twinId:"twin_id"},zt={page:N,size:N,retCount:R,freeIps:N,totalIps:N,pricingPolicyId:T,version:N,farmId:T,twinId:T,name:A,nameContains:A,certificationType(t){X(t,[me.Diy,me.Certified])},dedicated:R,stellarAddress:A};class Ht extends ee{constructor(e,a={}){super({mapper:Kt,validator:zt,queries:a}),this.uri=e}}var H;(function(t){t.Up="up",t.Down="down"})(H||(H={}));const jt={page:"page",size:"size",retCount:"ret_count",freeMru:"free_mru",freeHru:"free_hru",freeSru:"free_sru",freeIps:"free_ips",status:"status",city:"city",country:"country",farmName:"farm_name",ipv4:"ipv4",ipv6:"ipv6",dedicated:"dedicated",rentable:"rentable",rented:"rented",rentedBy:"rentedBy",availableFor:"available_for",farmIds:"farm_ids"},We=/^\d+$/,qt={page:N,size:N,retCount:R,freeMru:N,freeHru:N,freeSru:N,freeIps:N,status(t){X(t,[H.Up,H.Down])},city:A,country:A,farmName:A,ipv4:R,ipv6:R,dedicated:R,rentable:R,rented:R,rentedBy:T,availableFor:T,farmIds(t){t.split(",").forEach(e=>{he(e,We),T(+e)})}};class Gt extends ee{constructor(e,a={}){super({mapper:jt,validator:qt,queries:a}),this.uri=e}}const Yt={page:"page",size:"size",retCount:"ret_count",freeMru:"free_mru",freeHru:"free_hru",freeSru:"free_sru",freeIps:"free_ips",status:"status",city:"city",country:"country",farmName:"farm_name",domain:"domain",ipv4:"ipv4",ipv6:"ipv6",dedicated:"dedicated",rentable:"rentable",rented:"rented",rentedBy:"rented_by",availableFor:"available_for",farmIds:"farm_ids",nodeId:"node_id"},Qt={page:N,size:N,retCount:R,freeMru:N,freeHru:N,freeSru:N,freeIps:N,status(t){X(t,[H.Up,H.Down])},city:A,country:A,farmName:A,domain:R,ipv4:R,ipv6:R,dedicated:R,rentable:R,rented:R,rentedBy:T,availableFor:T,farmIds(t){t.split(",").forEach(e=>{he(e,We),T(+e)})},nodeId:T};class Jt extends ee{constructor(e,a={}){super({mapper:Yt,validator:Qt,queries:a}),this.uri=e}}const Xt={status:"status"},Zt={status(t){X(t,[H.Up,H.Down])}};class xt extends ee{constructor(e,a={}){super({mapper:Xt,validator:Zt,queries:a}),this.uri=e}}const ea={page:"page",size:"size",retCount:"ret_count",accountId:"account_id",twinId:"twin_id"},ta={page:N,size:N,retCount:R,twinId:T,accountId:T};class aa extends ee{constructor(e,a={}){super({mapper:ea,validator:ta,queries:a}),this.uri=e}}class te{constructor(e){this.uri=e.uri,this.__Builder=e.Builder}builder(e={}){return new this.__Builder(this.uri,e)}}var Ce;(function(t){t.Default="Default",t.None="none",t.Bronze="Bronze",t.Silver="Silver",t.Gold="Gold"})(Ce||(Ce={}));class oa extends te{constructor(e){super({uri:e,Builder:Wt})}async list(e={}){const a=await this.builder(e).build("/contracts");return de(a)}}class na extends te{constructor(e){super({uri:e,Builder:Ht})}async list(e={}){const a=await this.builder(e).build("/farms");return de(a)}async listAll(e={}){const{count:a}=await this.list(Object.assign(Object.assign({},e),{size:50,page:1,retCount:!0})),n=[],o=Math.ceil(a/50);for(let l=0;l<o;l++)n.push(this.list(Object.assign(Object.assign({},e),{size:50,page:l+1})));return(await Promise.all(n)).map(l=>l.data).flat(1)}}class la extends te{constructor(e){super({uri:e,Builder:Gt})}async list(e={}){const a=await this.builder(e).build("/gateways");return de(a)}async byId(e){return T(e),(await this.builder({}).build(`/gateways/${e}`)).json()}}class ra extends te{constructor(e,a){super({uri:e,Builder:Jt}),this.__farmsClient=a,this.farms=new Map,this.setFarm=this.setFarm.bind(this)}async list(e={},a={}){const n=await this.builder(e).build("/nodes"),o=await de(n);return a.loadFarm&&(await this.loadFarms(o.data.map(u=>u.farmId)),o.data=o.data.map(this.setFarm)),o}async byId(e,a={}){const o=await(await this.builder({}).build(`/nodes/${e}`)).json();return a.loadFarm&&o?(await this.loadFarms([o.farmId]),this.setFarm(o)):o}async listAll(e={}){const{count:a}=await this.list(Object.assign(Object.assign({},e),{size:50,page:1,retCount:!0})),n=[],o=Math.ceil(a/50);for(let l=0;l<o;l++)n.push(this.list(Object.assign(Object.assign({},e),{size:50,page:l+1})));return(await Promise.all(n)).map(l=>l.data).flat(1)}async loadFarms(e){e=e.filter(o=>!this.farms.has(o));const a=Array.from(new Set(e));if(!a.length)return;const n=await Promise.all(a.map(o=>this.__farmsClient.list({farmId:o})));for(const{data:o}of n){const[u]=o;this.farms=this.farms.set(u.farmId,u)}}setFarm(e){return e.farm=this.farms.get(e.farmId),e}}class sa extends te{constructor(e){super({uri:e,Builder:xt})}async get(e={}){return(await this.builder(e).build("/stats")).json()}}class ia extends te{constructor(e){super({uri:e,Builder:aa})}async list(e={}){const a=await this.builder(e).build("/twins");return de(a)}}var Y;(function(t){t.Main="main",t.Test="test",t.Dev="dev",t.Qa="qa"})(Y||(Y={}));class ua{constructor(e){X(e,[Y.Main,Y.Test,Y.Dev,Y.Qa]),this.__uri=e===Y.Main?"https://gridproxy.grid.tf":`https://gridproxy.${e}.grid.tf`,this.contracts=new oa(this.__uri),this.farms=new na(this.__uri),this.gateways=new la(this.__uri),this.nodes=new ra(this.__uri,this.farms),this.stats=new sa(this.__uri),this.twins=new ia(this.__uri)}get uri(){return this.__uri}}const da=new J("dev"),ca=new ua("dev");async function ma(t,e){const a=[];let n=1;for(;n;){const u=await t.capacity.filterNodes({...e,page:n}).catch(()=>[]);a.push(u),n=a[n-1].length?++n:0}const o=Array.from(new Set(a.flat(1).map(u=>u.farmId)));return da.farms({farmID:!0,name:!0},{orderBy:["farmID_ASC"],where:{farmID_in:o},limit:o.length})}const pa={name:"SelectCountry"},Ke=U({...pa,props:{modelValue:null},emits:["update:modelValue"],setup(t,{emit:e}){const a=w();K(a,l=>e("update:modelValue",l));const n=w(!1),o=w();async function u(){try{n.value=!0;const l=await ca.stats.get({status:H.Up});o.value=Object.keys(l.nodesDistribution),n.value=!1}catch{setTimeout(u,1e3)}}return ve(u),(l,m)=>{const d=_("v-autocomplete");return h(),$(d,{disabled:n.value,label:"Country",items:o.value,clearable:"",loading:n.value,modelValue:a.value,"onUpdate:modelValue":m[0]||(m[0]=c=>a.value=c)},null,8,["disabled","items","loading","modelValue"])}}}),va=M("h6",{class:"text-h5 mb-4"},"Farm Filter",-1),fa={name:"SelectFarm",components:{SelectCountry:Ke}},ye=U({...fa,props:{modelValue:{type:Object},country:String,filters:{default:()=>({}),type:Object}},emits:["update:modelValue"],setup(t,{emit:e}){const a=t,n=x(),o=w(),u=w();K([u,o],([v,f])=>e("update:modelValue",v?{farmID:v.farmID,name:v.name,country:f??void 0}:void 0));const l=w(!1),m=w([]);async function d(){l.value=!0;const v=u.value;u.value=void 0;const f=await j(n.profile),g=a.filters;m.value=await ma(f,{country:o.value,cru:g.cpu,mru:g.memory?Math.round(g.memory/1024):void 0,hru:g.disk,sru:g.ssd,publicIPs:g.publicIp,availableFor:f.twinId}),v&&(u.value=m.value.find(y=>y.name===v.name)),u.value||(u.value=m.value[0]),l.value=!1}ve(d);const c=w(!1);return K(()=>({...a.filters,country:o.value}),(v,f)=>{v.cpu===f.cpu&&v.memory===f.memory&&v.ssd===f.ssd&&v.disk===f.disk&&v.publicIp===f.publicIp&&v.country===f.country||(c.value=!0)}),K([l,c],async([v,f])=>{v||!f||(c.value=!1,await d())}),(v,f)=>{var p;const g=_("v-autocomplete"),y=_("input-validator");return h(),V("section",null,[va,s(Ke,{modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=S=>o.value=S)},null,8,["modelValue"]),s(y,{rules:[v.validators.required("Farm is required.")],value:(p=u.value)==null?void 0:p.farmID},{default:i(()=>[s(g,{disabled:l.value,label:"Farm Name",items:m.value,loading:l.value,"item-title":"name","return-object":"","model-value":c.value?void 0:u.value,"onUpdate:modelValue":f[1]||(f[1]=S=>u.value=S),"error-messages":!l.value&&!m.value.length?"No farms where found with the specified resources.":void 0},null,8,["disabled","items","loading","model-value","error-messages"])]),_:1},8,["rules","value"])])}}});function Ja(t,e={}){return t.capacity.filterNodes({gateway:!0,...e}).catch(()=>[])}function ya(t){return Ue[t.projectName]+t.twinId+t.deploymentName.toLowerCase()}async function Xa(t,e){const a=new ct;return a.name=e.name,a.node_id=e.nodeId,a.tls_passthrough=e.tlsPassthrough||!1,a.backends=e.backends,a.solutionProviderID=1,t.gateway.deploy_name(a)}async function Za(t,e){const a=await t.machines.delete({name:e});if(a.deleted.length===0)throw new Error(`Failed to delete deployment with name "${e}".`);return a}async function _a(t,e){if(e.projectName===E.QVM){const a=await fe(t,e.name);a[0].mounts.length&&await t.qsfs_zdbs.delete({name:a[0].mounts[0].name})}return wa(e.projectName)&&await ba(t,e),e.projectName===E.Kubernetes?t.k8s.delete({name:e.name}):t.machines.delete({name:e.name})}async function ba(t,e){const a=ya({deploymentName:e.name,projectName:e.projectName,twinId:t.twinId});for(const n of[e.projectName,E.Gateway,""])if(await ga(Q(t,{projectName:n}),a)){Q(t,{projectName:e.projectName});return}throw new Error(`Can't delete gateway contracts with name ${a}`)}async function ga(t,e){const{deleted:a}=await t.gateway.delete_name({name:e});return a.length>0}function wa(t){const e=[E.Discourse,E.Funkwhale,E.Mastodon,E.Mattermost,E.Owncloud,E.Peertube,E.Subsquid,E.Taiga,E.Wordpress];return e.includes(t)?!0:e.map(a=>a.toLowerCase()).includes(t)}const Sa={name:"IconActionBtn"},I=U({...Sa,props:{tooltip:null,icon:null,color:null,href:null},emits:["click"],setup(t){return(e,a)=>{const n=_("v-btn"),o=_("v-tooltip");return h(),$(o,{text:t.tooltip,location:"bottom"},{activator:i(({props:u})=>[s(n,L({onClick:a[0]||(a[0]=mt(l=>e.$emit("click",l),["stop"])),icon:t.icon,color:t.color},u,{href:t.href,target:t.href?"_blank":void 0}),null,16,["icon","color","href","target"])]),_:1},8,["text"])}}});async function be(t,e={}){const a=await t.machines.list();let n=a.length;const o=a.map(c=>t.machines.getObj(c).catch(v=>(console.log(`%c[Error] failed to load deployment with name ${c}:
${Ie(v,"No errors were provided.")}`,"color: rgb(207, 102, 121)"),null))),l=(await Promise.all(o)).map((c,v)=>(c&&(c.deploymentName=a[v],c.projectName=t.clientOptions.projectName,c.forEach(f=>{f.deploymentName=a[v],f.projectName=t.clientOptions.projectName})),c)).filter(c=>c&&c.length>0).filter(c=>e.filter&&!e.filter(c)?(n--,!1):!0),m=await Promise.all(l.map(c=>t.contracts.getConsumption({id:c[0].contractId}).catch(()=>{}))),d=l.map((c,v)=>(c[0].billing=$e(m[v]),c));return{count:n,items:d}}async function ge(t){const e=await t.k8s.list(),a=e.map(m=>t.k8s.getObj(m).catch(d=>(console.log(`%c[Error] failed to load deployment with name ${m}:
${Ie(d,"No errors were provided.")}`,"color: rgb(207, 102, 121)"),null))),o=(await Promise.all(a)).map((m,d)=>(m&&(m.deploymentName=e[d],m.projectName=t.clientOptions.projectName),m)).filter(m=>m&&m.masters.length>0),u=await Promise.all(o.map(m=>t.contracts.getConsumption({id:m.masters[0].contractId}).catch(()=>{}))),l=o.map((m,d)=>(m.masters[0].billing=$e(u[d]),m));return{count:e.length,items:l}}function ze(...t){return t.reduce((e,a)=>(e.count+=a.count,e.items=e.items.concat(a.items),e),{count:0,items:[]})}const Ia={name:"VmDeploymentTable",components:{ListTable:q}},He=U({...Ia,props:{projectName:null,modelValue:null,deleting:{type:Boolean}},emits:["update:model-value"],setup(t,{expose:e}){const a=t,n=x(),o=w(!1),u=w(),l=w([]);ve(m);async function m(){l.value=[],o.value=!0;const d=await j(n.profile,a.projectName),c=await be(d),v=await be(Q(d,{projectName:a.projectName.toLowerCase()})),f=a.projectName===E.VM?void 0:([p])=>p.flist.replace(/-/g,"").includes(a.projectName.toLowerCase()),g=a.projectName===E.Fullvm?{count:0,items:[]}:await be(Q(d,{projectName:""}),{filter:f}),y=ze(c,v,g);u.value=y.count,l.value=y.items,o.value=!1}return e({loadDeployments:m}),(d,c)=>{const v=_("v-alert"),f=_("v-tooltip"),g=_("v-chip"),y=_("v-btn-group");return h(),V(F,null,[!o.value&&u.value&&l.value.length<u.value?(h(),$(v,{key:0,type:"warning",variant:"tonal"},{default:i(()=>[b(" Failed to load "),M("strong",null,k(u.value-l.value.length),1),b(" deployment"+k(u.value-l.value.length>1?"s":"")+". ",1)]),_:1})):z("",!0),s(q,{headers:[{title:"#",key:"index"},{title:"PLACEHOLDER",key:"data-table-select"},{title:"Name",key:"name"},{title:"Public IPv4",key:"ipv4"},{title:"Public IPv6",key:"ipv6"},{title:"Planetary Network IP",key:"planetary"},{title:"Flist",key:"flist"},{title:"Billing Rate",key:"billing"},{title:"Actions",key:"actions"}],items:l.value,loading:o.value,deleting:t.deleting,"model-value":d.$props.modelValue,"onUpdate:modelValue":c[0]||(c[0]=p=>d.$emit("update:model-value",p)),"no-data-text":`No ${t.projectName} deployments found on this account.`},{["item.index"]:i(({item:p})=>[b(k(l.value.indexOf(p==null?void 0:p.value)+1),1)]),["item.name"]:i(({item:p})=>[b(k(p.value[0].name),1)]),["item.ipv4"]:i(({item:p})=>{var S;return[b(k(((S=p.value[0].publicIP)==null?void 0:S.ip)||"None"),1)]}),["item.ipv6"]:i(({item:p})=>{var S;return[b(k(((S=p.value[0].publicIP)==null?void 0:S.ip6)||"None"),1)]}),["item.planetary"]:i(({item:p})=>[b(k(p.value[0].planetary||"None"),1)]),["item.flist"]:i(({item:p})=>[s(f,{text:p.value[0].flist,location:"bottom right"},{activator:i(({props:S})=>[M("p",pt(vt(S)),k(p.value[0].flist.replace("https://hub.grid.tf/","").replace(".flist","")),17)]),_:2},1032,["text"])]),["item.billing"]:i(({item:p})=>[b(k(p.value[0].billing),1)]),["item.actions"]:i(({item:p})=>[t.deleting&&(d.$props.modelValue||[]).includes(p.value)?(h(),$(g,{key:0,color:"error",variant:"tonal"},{default:i(()=>[b(" Deleting... ")]),_:1})):(h(),$(y,{key:1,variant:"tonal"},{default:i(()=>[le(d.$slots,t.projectName+"-actions",{item:p})]),_:2},1024))]),_:2},1032,["items","loading","deleting","model-value","no-data-text"])],64)}}}),ha={name:"K8sDeploymentTable",components:{ListTable:q}},je=U({...ha,props:{projectName:null,modelValue:null,deleting:{type:Boolean}},emits:["update:model-value"],setup(t,{expose:e}){const a=t,n=x(),o=w(),u=w([]),l=w(!1);ve(m);async function m(){u.value=[],l.value=!0;const d=await j(n.profile,a.projectName),c=await ge(d),v=await ge(Q(d,{projectName:a.projectName.toLowerCase()})),f=await ge(Q(d,{projectName:""})),g=ze(c,v,f);o.value=g.count,u.value=g.items,l.value=!1}return e({loadDeployments:m}),(d,c)=>{const v=_("v-alert"),f=_("v-chip"),g=_("v-btn-group");return h(),V(F,null,[!l.value&&o.value&&u.value.length<o.value?(h(),$(v,{key:0,type:"warning",variant:"tonal"},{default:i(()=>[b(" Failed to load "),M("strong",null,k(o.value-u.value.length),1),b(" deployment"+k(o.value-u.value.length>1?"s":"")+". ",1)]),_:1})):z("",!0),s(q,{headers:[{title:"#",key:"index"},{title:"PLACEHOLDER",key:"data-table-select"},{title:"Name",key:"name"},{title:"Public IPv4",key:"ipv4"},{title:"Public IPv6",key:"ipv6"},{title:"Planetary Network IP",key:"planetary"},{title:"Workers",key:"workers"},{title:"Billing Rate",key:"billing"},{title:"Actions",key:"actions"}],items:u.value,loading:l.value,deleting:t.deleting,"model-value":d.$props.modelValue,"onUpdate:modelValue":c[0]||(c[0]=y=>d.$emit("update:model-value",y)),"no-data-text":"No Kubernetes deployments found on this account."},{["item.index"]:i(({item:y})=>[b(k(u.value.indexOf(y==null?void 0:y.value)+1),1)]),["item.name"]:i(({item:y})=>[b(k(y.value.masters[0].name),1)]),["item.ipv4"]:i(({item:y})=>{var p;return[b(k(((p=y.value.masters[0].publicIP)==null?void 0:p.ip)||"None"),1)]}),["item.ipv6"]:i(({item:y})=>{var p;return[b(k(((p=y.value.masters[0].publicIP)==null?void 0:p.ip6)||"None"),1)]}),["item.planetary"]:i(({item:y})=>[b(k(y.value.masters[0].planetary||"None"),1)]),["item.workers"]:i(({item:y})=>[b(k(y.value.workers.length),1)]),["item.billing"]:i(({item:y})=>[b(k(y.value.masters[0].billing),1)]),["item.actions"]:i(({item:y})=>[t.deleting&&(d.$props.modelValue||[]).includes(y.value)?(h(),$(f,{key:0,color:"error",variant:"tonal"},{default:i(()=>[b(" Deleting... ")]),_:1})):(h(),$(g,{key:1,variant:"tonal"},{default:i(()=>[le(d.$slots,"actions",{item:y})]),_:2},1024))]),_:2},1032,["items","loading","deleting","model-value","no-data-text"])],64)}}});async function xa(t,e){const a=new Oe,n=new ft;n.name=e.name,n.secret=e.clusterToken;const o=await Promise.all([Ne(t,e.master,a),Promise.all(e.workers.map(u=>Ne(t,u,a)))]);return n.network=Re({addAccess:!0}),n.masters=[o[0]],n.workers=o[1],n.metadata=e.metadata,n.description=e.description,n.ssh_key=e.sshKey,await t.k8s.deploy(n),Pe(t,n.name)}function Pe(t,e){return t.k8s.getObj(e)}async function Ne(t,e,a){const n={cru:e.cpu,mru:Math.round(e.memory/1024),farmId:e.farm.farmID,farmName:e.farm.name,sru:e.diskSize+e.rootFsSize,publicIPs:e.ipv4,availableFor:t.twinId,country:e.farm.country},o=new yt;return o.name=e.name,o.node_id=await a.pick(await t.capacity.filterNodes(n)),o.cpu=e.cpu,o.disk_size=e.diskSize,o.memory=e.memory,o.public_ip=e.ipv4,o.public_ip6=e.ipv6,o.rootfs_size=e.rootFsSize,o.planetary=e.planetary,o.solutionProviderID=1,o}async function Pa(t,e){const a={cru:e.cpu,mru:Math.round(e.memory/1024),farmId:e.farm.farmID,farmName:e.farm.name,sru:e.diskSize+e.rootFsSize,publicIPs:e.ipv4,availableFor:t.twinId,country:e.farm.country},n=new _t;return n.deployment_name=e.deploymentName,n.name=e.name,n.cpu=e.cpu,n.memory=e.memory,n.disk_size=e.diskSize,n.public_ip=e.ipv4,n.public_ip6=e.ipv6,n.planetary=e.planetary,n.rootfs_size=e.rootFsSize,n.node_id=n.node_id=+Ee(await t.capacity.filterNodes(a)).nodeId,n.solutionProviderID=1,await t.k8s.add_worker(n),Pe(t,e.deploymentName)}async function ka(t,e){const a=new bt;a.deployment_name=e.deploymentName,a.name=e.name;const n=await t.k8s.delete_worker(a);if(!n.deleted&&!n.updated)throw new Error("Failed to delete worker");return n}const De=1024;function ue(t,e){return new gt(t).mul(e).divToInt(8*De).toNumber()===0?500/De:2}const Ca={class:"d-flex"},Na={style:{width:"100%"},class:"mr-4"},Da={name:"RootFsSize"},qe=U({...Da,props:{cpu:null,memory:null,modelValue:null},emits:["update:model-value"],setup(t,{emit:e}){const a=t,n=w(),o=w(ue(a.cpu??0,a.memory??0));K(o,m=>e("update:model-value",m),{immediate:!0});const u=w(!1);K(()=>[u.value,a.cpu||0,a.memory||0],async([m,d,c])=>{await n.value.validate(o.value),m||(o.value=ue(d,c))});function l(m){return d=>{const c=ue(a.cpu??0,a.memory??0);return m.min(`Root File System min value is ${c}GB.`,c)(d)}}return(m,d)=>{const c=_("v-text-field"),v=_("input-validator"),f=_("v-switch"),g=_("v-tooltip");return h(),V("div",Ca,[M("div",Na,[s(v,{value:o.value,rules:[m.validators.required("Root File System is required."),l(m.validators)],ref_key:"input",ref:n},{default:i(({props:y})=>[s(c,L({label:"Root File System (GB)",type:"number",disabled:!u.value,modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=p=>o.value=p),modelModifiers:{number:!0}},y),null,16,["disabled","modelValue"])]),_:1},8,["value","rules"])]),s(g,{text:"Toggle editing root filesystem size"},{activator:i(({props:y})=>[s(f,L({inset:"",color:"primary",modelValue:u.value,"onUpdate:modelValue":d[1]||(d[1]=p=>u.value=p)},y),null,16,["modelValue"])]),_:1})])}}});function Ea(t="WR"+pe(9)){return{name:t,cpu:1,memory:4096,diskSize:100,ipv4:!1,ipv6:!1,planetary:!0,rootFsSize:2,farm:void 0}}const Ma={name:"K8SWorker",components:{SelectFarm:ye,RootFsSize:qe}},Ge=U({...Ma,props:{modelValue:null},setup(t){return(e,a)=>{const n=_("v-text-field"),o=_("input-validator"),u=_("v-switch");return h(),V(F,null,[s(o,{value:e.$props.modelValue.name,rules:[e.validators.required("Name is required."),l=>e.validators.isAlpha("Name must start with alphabet char.")(l[0]),e.validators.isAlphanumeric("Name should consist of alphabets & numbers only."),e.validators.minLength("Name minimum length is 2 chars.",2),e.validators.maxLength("Name max length is 15 chars.",15)]},{default:i(({props:l})=>[s(n,L({label:"Name",modelValue:e.$props.modelValue.name,"onUpdate:modelValue":a[0]||(a[0]=m=>e.$props.modelValue.name=m)},l),null,16,["modelValue"])]),_:1},8,["value","rules"]),s(o,{value:e.$props.modelValue.cpu,rules:[e.validators.required("CPU is required."),e.validators.isInt("CPU must be a valid integer."),e.validators.min("CPU min is 1 cores.",1),e.validators.max("CPU max is 32 cores.",32)]},{default:i(({props:l})=>[s(n,L({label:"CPU (vCores)",type:"number",modelValue:e.$props.modelValue.cpu,"onUpdate:modelValue":a[1]||(a[1]=m=>e.$props.modelValue.cpu=m),modelModifiers:{number:!0}},l),null,16,["modelValue"])]),_:1},8,["value","rules"]),s(o,{value:e.$props.modelValue.memory,rules:[e.validators.required("Memory is required."),e.validators.isInt("Memory must be a valid integer."),e.validators.min("Minimum allowed memory is 1024 MB.",1024),e.validators.max("Maximum allowed memory is 256 GB.",256*1024)]},{default:i(({props:l})=>[s(n,L({label:"Memory (MB)",type:"number",modelValue:e.$props.modelValue.memory,"onUpdate:modelValue":a[2]||(a[2]=m=>e.$props.modelValue.memory=m),modelModifiers:{number:!0}},l),null,16,["modelValue"])]),_:1},8,["value","rules"]),s(o,{value:e.$props.modelValue.diskSize,rules:[e.validators.required("Disk size is required."),e.validators.isInt("Disk size must be a valid integer."),e.validators.min("Minimum allowed disk size is 1 GB.",1),e.validators.max("Maximum allowed disk size is 10000 GB.",1e4)]},{default:i(({props:l})=>[s(n,L({label:"Disk Size (GB)",type:"number",modelValue:e.$props.modelValue.diskSize,"onUpdate:modelValue":a[3]||(a[3]=m=>e.$props.modelValue.diskSize=m),modelModifiers:{number:!0}},l),null,16,["modelValue"])]),_:1},8,["value","rules"]),s(u,{label:"Public IPv4",inset:"",color:"primary",modelValue:e.$props.modelValue.ipv4,"onUpdate:modelValue":a[4]||(a[4]=l=>e.$props.modelValue.ipv4=l)},null,8,["modelValue"]),s(u,{label:"Public IPv6",inset:"",color:"primary",modelValue:e.$props.modelValue.ipv6,"onUpdate:modelValue":a[5]||(a[5]=l=>e.$props.modelValue.ipv6=l)},null,8,["modelValue"]),s(u,{label:"Planetary Network",inset:"",color:"primary",modelValue:e.$props.modelValue.planetary,"onUpdate:modelValue":a[6]||(a[6]=l=>e.$props.modelValue.planetary=l)},null,8,["modelValue"]),s(qe,{cpu:e.$props.modelValue.cpu,memory:e.$props.modelValue.memory,modelValue:e.$props.modelValue.rootFsSize,"onUpdate:modelValue":a[7]||(a[7]=l=>e.$props.modelValue.rootFsSize=l),modelModifiers:{number:!0}},null,8,["cpu","memory","modelValue"]),s(ye,{filters:{cpu:e.$props.modelValue.cpu,memory:e.$props.modelValue.memory,publicIp:e.$props.modelValue.ipv4,ssd:e.$props.modelValue.diskSize+e.$props.modelValue.rootFsSize},modelValue:e.$props.modelValue.farm,"onUpdate:modelValue":a[8]||(a[8]=l=>e.$props.modelValue.farm=l)},null,8,["filters","modelValue"])],64)}}}),$a={name:"ManageWorkerDialog"},_e=U({...$a,props:{workers:null,selectedWorkers:null,deleting:{type:Boolean}},emits:["close","delete","deploy","back"],setup(t,{emit:e}){const a=t,n=w(),o=w(a.workers.length===0?1:0),u=w(!0),l=w(!1);function m(){l.value=!1,e("delete",d=>{d.length===0&&(o.value=1)})}return(d,c)=>{var Z;const v=_("v-btn"),f=_("v-btn-toggle"),g=_("form-validator"),y=_("weblet-layout"),p=_("v-dialog"),S=_("v-card-title"),C=_("v-chip"),B=_("v-card-text"),W=_("v-spacer"),ae=_("v-card-actions"),oe=_("v-card");return h(),V(F,null,[s(p,{"model-value":"",scrollable:"",width:"70%",persistent:((Z=n.value)==null?void 0:Z.status)==="deploy"||t.deleting,"onUpdate:modelValue":c[6]||(c[6]=D=>d.$emit("close"))},{default:i(()=>[s(y,{ref_key:"layout",ref:n,onBack:c[5]||(c[5]=D=>d.$emit("back"))},{title:i(()=>[le(d.$slots,"title")]),"header-actions":i(()=>{var D;return[s(f,{divided:"",modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=O=>o.value=O),mandatory:"",disabled:((D=n.value)==null?void 0:D.status)||t.deleting,class:"mt-2"},{default:i(()=>[s(v,{variant:"outlined",disabled:t.workers.length===0},{default:i(()=>[b(" List ")]),_:1},8,["disabled"]),s(v,{variant:"outlined"},{default:i(()=>[b(" Deploy ")]),_:1})]),_:1},8,["modelValue","disabled"])]}),"footer-actions":i(()=>[o.value===0?(h(),$(v,{key:0,color:"error",variant:"outlined","prepend-icon":"mdi-delete",disabled:t.selectedWorkers.length===0||t.deleting,onClick:c[2]||(c[2]=D=>l.value=!0)},{default:i(()=>[b(" Delete ")]),_:1},8,["disabled"])):z("",!0),o.value===1?(h(),$(v,{key:1,color:"primary",variant:"tonal",disabled:!u.value,onClick:c[3]||(c[3]=D=>d.$emit("deploy",n.value))},{default:i(()=>[b(" Deploy ")]),_:1},8,["disabled"])):z("",!0),t.deleting?z("",!0):(h(),$(v,{key:2,color:"error",variant:"tonal",onClick:c[4]||(c[4]=D=>d.$emit("close"))},{default:i(()=>[b(" Close ")]),_:1}))]),default:i(()=>[o.value===0?le(d.$slots,"list",{key:0}):(h(),$(g,{key:1,modelValue:u.value,"onUpdate:modelValue":c[1]||(c[1]=D=>u.value=D)},{default:i(()=>[le(d.$slots,"deploy")]),_:3},8,["modelValue"]))]),_:3},512)]),_:3},8,["persistent"]),s(p,{width:"50%",modelValue:l.value,"onUpdate:modelValue":c[8]||(c[8]=D=>l.value=D)},{default:i(()=>[s(oe,null,{default:i(()=>[s(S,{class:"text-h5"},{default:i(()=>[b(" Are you sure you want to delete the following workers? ")]),_:1}),s(B,null,{default:i(()=>[(h(!0),V(F,null,Me(t.selectedWorkers,D=>(h(),$(C,{class:"ma-1",color:"primary",label:"",key:D.name},{default:i(()=>[b(k(D.name),1)]),_:2},1024))),128))]),_:1}),s(ae,null,{default:i(()=>[s(W),s(v,{color:"error",variant:"text",onClick:m},{default:i(()=>[b(" Remove ")]),_:1}),s(v,{color:"error",variant:"tonal",onClick:c[7]||(c[7]=D=>l.value=!1)},{default:i(()=>[b(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),Oa={name:"ManageK8SWorkerDialog",components:{K8SWorker:Ge,ListTable:q,ManageWorkerDialog:_e}},Ye=U({...Oa,props:{data:null},emits:["close","update:k8s"],setup(t,{emit:e}){const a=t,n=x(),o=w(Ea()),u=w([]),l=w(!1);function m(v){return v.reduce((f,g)=>f+g.size,0)/1024**3}async function d(v){v.setStatus("deploy");const f=await j(n.profile,E.Kubernetes);console.log(a.data.deploymentName),Pa(f,{...o.value,deploymentName:a.data.deploymentName}).then(g=>{v.setStatus("success",`Successfully add a new worker to '${a.data.deploymentName}' Cluster.`),e("update:k8s",g)}).catch(g=>{const y=typeof g=="string"?g:g.message;v.setStatus("failed",y)})}async function c(v){l.value=!0;const f=await j(n.profile,E.Kubernetes);for(const y of u.value)try{await ka(f,{deploymentName:a.data.deploymentName,name:y.name})}catch(p){console.log("Error while deleting worker",p)}u.value=[];const g=await Pe(f,a.data.deploymentName);e("update:k8s",g),v(g.workers),l.value=!1}return(v,f)=>(h(),$(_e,{workers:t.data.workers,selectedWorkers:u.value,deleting:l.value,onClose:f[2]||(f[2]=g=>v.$emit("close")),onDeploy:d,onDelete:c},{title:i(()=>[b("Manage Kubernetes("+k(t.data.deploymentName)+") Workers",1)]),list:i(()=>[s(q,{headers:[{title:"#",key:"index"},{title:"PLACEHOLDER",key:"data-table-select"},{title:"Contract ID",key:"contractId"},{title:"Name",key:"name"},{title:"Planetary Network IP",key:"planetary"},{title:"CPU(vCores)",key:"capacity.cpu"},{title:"Memory(MB)",key:"capacity.memory"},{title:"Disk(GB)",key:"disk"}],items:t.data.workers,loading:!1,deleting:l.value,modelValue:u.value,"onUpdate:modelValue":f[0]||(f[0]=g=>u.value=g)},{["item.index"]:i(({item:g})=>[b(k(t.data.workers.indexOf(g==null?void 0:g.value)+1),1)]),["item.disk"]:i(({item:g})=>[b(k(m(g.value.mounts)),1)]),_:2},1032,["headers","items","deleting","modelValue"])]),deploy:i(()=>[s(Ge,{modelValue:o.value,"onUpdate:modelValue":f[1]||(f[1]=g=>o.value=g)},null,8,["modelValue"])]),_:1},8,["workers","selectedWorkers","deleting"]))}}),Ra={key:0},Ta={name:"SelectSolutionFlavor"},Qe=U({...Ta,props:{minimum:{type:Object,default:()=>({cpu:1,memory:1024,disk:100})},standard:{type:Object,default:()=>({cpu:2,memory:1024*2,disk:250})},recommended:{type:Object,default:()=>({cpu:4,memory:1024*4,disk:500})}},emits:["update:model-value"],setup(t,{emit:e}){const a=t,n=wt(()=>{const{minimum:d,standard:c,recommended:v}=a;return[{title:`Minimum(CPU: ${d.cpu} vCores, Memory: ${d.memory} MB, Disk: ${d.disk} GB)`,value:d},{title:`Standard(CPU: ${c.cpu} vCores, Memory: ${c.memory} MB, Disk: ${c.disk} GB)`,value:c},{title:`Recommended(CPU: ${v.cpu} vCores, Memory: ${v.memory} MB, Disk: ${v.disk} GB)`,value:v},{title:"Custom",value:"custom"}]}),o=w(n.value[0].value),u=w(),l=w(),m=w();return K(o,d=>{d==="custom"||typeof d=="string"||(u.value=d.cpu,l.value=d.memory,m.value=d.disk)},{immediate:!0}),K([u,l,m],([d,c,v])=>{e("update:model-value",d&&c&&v?{cpu:d,memory:c,disk:v}:void 0)},{immediate:!0}),(d,c)=>{const v=_("v-select"),f=_("v-text-field"),g=_("input-validator");return h(),V(F,null,[s(v,{label:"Select",items:re(n),modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=y=>o.value=y)},null,8,["items","modelValue"]),o.value==="custom"?(h(),V("div",Ra,[s(g,{value:u.value,rules:[d.validators.required("CPU is required."),d.validators.isInt("CPU must be a valid integer."),d.validators.min("CPU min is 1 cores.",1),d.validators.max("CPU max is 32 cores.",32)]},{default:i(({props:y})=>[s(f,L({type:"number",label:"CPU (vCores)",modelValue:u.value,"onUpdate:modelValue":c[1]||(c[1]=p=>u.value=p),modelModifiers:{number:!0}},y),null,16,["modelValue"])]),_:1},8,["value","rules"]),s(g,{value:l.value,rules:[d.validators.required("Memory is required."),d.validators.isInt("Memory must be a valid integer."),d.validators.min("Minimum allowed memory is 256 MB.",256),d.validators.max("Maximum allowed memory is 256 GB.",256*1024)]},{default:i(({props:y})=>[s(f,L({type:"number",label:"Memory (MB)",modelValue:l.value,"onUpdate:modelValue":c[2]||(c[2]=p=>l.value=p),modelModifiers:{number:!0}},y),null,16,["modelValue"])]),_:1},8,["value","rules"]),s(g,{value:m.value,rules:[d.validators.required("Disk size is required."),d.validators.isInt("Disk size must be a valid integer."),d.validators.min("Minimum allowed disk size is 1 GB.",1),d.validators.max("Maximum allowed disk size is 10000 GB.",1e4)]},{default:i(({props:y})=>[s(f,L({type:"number",label:"Disk (GB)",modelValue:m.value,"onUpdate:modelValue":c[3]||(c[3]=p=>m.value=p),modelModifiers:{number:!0}},y),null,16,["modelValue"])]),_:1},8,["value","rules"])])):z("",!0)],64)}}});function Aa(t="WR"+pe(9)){return{name:t}}const Va={name:"CaproverWorker",components:{SelectSolutionFlavor:Qe,SelectFarm:ye}},Je=U({...Va,props:{modelValue:null},setup(t){return(e,a)=>{var u,l,m,d,c;const n=_("v-text-field"),o=_("input-validator");return h(),V(F,null,[s(o,{rules:[e.validators.required("Name is required."),e.validators.minLength("Name minimum length is 2 chars.",2),e.validators.maxLength("Name max length is 15 chars.",15)],value:e.$props.modelValue.name},{default:i(({props:v})=>[s(n,L({label:"Name",modelValue:e.$props.modelValue.name,"onUpdate:modelValue":a[0]||(a[0]=f=>e.$props.modelValue.name=f)},v),null,16,["modelValue"])]),_:1},8,["rules","value"]),s(Qe,{modelValue:e.$props.modelValue.solution,"onUpdate:modelValue":a[1]||(a[1]=v=>e.$props.modelValue.solution=v)},null,8,["modelValue"]),s(ye,{filters:{cpu:(u=e.$props.modelValue.solution)==null?void 0:u.cpu,memory:(l=e.$props.modelValue.solution)==null?void 0:l.memory,publicIp:!0,ssd:(((m=e.$props.modelValue.solution)==null?void 0:m.disk)??0)+re(ue)(((d=e.$props.modelValue.solution)==null?void 0:d.cpu)??0,((c=e.$props.modelValue.solution)==null?void 0:c.memory)??0)},modelValue:e.$props.modelValue.farm,"onUpdate:modelValue":a[2]||(a[2]=v=>e.$props.modelValue.farm=v)},null,8,["filters","modelValue"])],64)}}}),Ua=M("strong",null,"Add your worker",-1),Ba={class:"px-4"},La=["href"],Fa=M("li",null,[b("Go to the "),M("strong",null,"cluster"),b(" tab.")],-1),Wa=M("li",null,[b(" Click "),M("strong",null,"Add Self-Hosted Registry"),b(" button then "),M("strong",null,"Enable Self-Hosted Registry"),b(". ")],-1),Ka=M("li",null,[b("Click "),M("strong",null,"Join cluster"),b(" button.")],-1),za={name:"ManageCaproverWorkerDialog",components:{ManageWorkerDialog:_e,CaproverWorker:Je,ListTable:q}},Xe=U({...za,props:{master:null,data:null},emits:["close","update:caprover"],setup(t,{emit:e}){const a=t,n=x(),o=w([]),u=w(!1),l=w(!1),m=w(Aa());function d(y){return y.reduce((p,S)=>p+S.size,0)/1024**3}const c=w();function v(){c.value&&(e("update:caprover",c.value),c.value=void 0)}async function f(y){y.setStatus("deploy");try{const p=await j(n.profile,E.Caprover);await y.validateBalance(p);const S=await Ct(p,{name:m.value.name,deploymentName:a.master.name,cpu:m.value.solution.cpu,memory:m.value.solution.memory,disks:[{name:"data0",size:m.value.solution.disk,mountPoint:"/var/lib/docker"}],flist:"https://hub.grid.tf/tf-official-apps/tf-caprover-main.flist",entryPoint:"/sbin/zinit init",farmId:m.value.farm.farmID,farmName:m.value.farm.name,country:m.value.farm.country,planetary:!0,publicIpv4:!0,envs:[{key:"SWM_NODE_MODE",value:"worker"},{key:"PUBLIC_KEY",value:a.master.env.PUBLIC_KEY}],rootFilesystemSize:ue(m.value.solution.cpu,m.value.solution.memory)});c.value=S,l.value=!0,y.setStatus("success",`Successfully add a new worker to Caprover('${a.master.name}') Instance.`)}catch(p){y.setStatus("failed",Ie(p,"Failed to deploy a caprover worker."))}}async function g(y){u.value=!0;const p=await j(n.profile,E.Caprover);for(const C of o.value){console.log(a.master.name,C.name);try{await Nt(p,{deploymentName:a.master.name,name:C.name})}catch(B){console.log("Error while deleting worker",B)}}o.value=[];const S=await fe(p,a.master.name);y(S.slice(1)),e("update:caprover",S),u.value=!1}return(y,p)=>{const S=_("v-card-title"),C=_("v-divider"),B=_("v-card-text"),W=_("v-spacer"),ae=_("v-btn"),oe=_("v-card-actions"),Z=_("v-card"),D=_("v-dialog");return h(),V(F,null,[s(_e,{workers:t.data,selectedWorkers:o.value,deleting:u.value,onClose:p[2]||(p[2]=O=>y.$emit("close")),onDeploy:f,onDelete:g,onBack:v},{title:i(()=>[b("Manage Caprover("+k(y.$props.master.name)+") Workers",1)]),list:i(()=>[s(q,{headers:[{title:"#",key:"index"},{title:"PLACEHOLDER",key:"data-table-select"},{title:"Contract ID",key:"contractId"},{title:"Name",key:"name"},{title:"Public IPv4",key:"publicIP.ip"},{title:"CPU(vCores)",key:"capacity.cpu"},{title:"Memory(MB)",key:"capacity.memory"},{title:"Disk(GB)",key:"disk"}],items:t.data,loading:!1,deleting:u.value,modelValue:o.value,"onUpdate:modelValue":p[0]||(p[0]=O=>o.value=O)},{["item.index"]:i(({item:O})=>[b(k(t.data.indexOf(O==null?void 0:O.value)+1),1)]),["item.disk"]:i(({item:O})=>[b(k(d(O.value.mounts)),1)]),_:2},1032,["headers","items","deleting","modelValue"])]),deploy:i(()=>[s(Je,{modelValue:m.value,"onUpdate:modelValue":p[1]||(p[1]=O=>m.value=O)},null,8,["modelValue"])]),_:1},8,["workers","selectedWorkers","deleting"]),c.value?(h(),$(D,{key:0,modelValue:l.value,"onUpdate:modelValue":p[4]||(p[4]=O=>l.value=O),scrollable:"",width:"500px"},{default:i(()=>[s(Z,null,{default:i(()=>[s(S,null,{default:i(()=>[Ua]),_:1}),s(C),s(B,null,{default:i(()=>[M("ol",Ba,[M("li",null,[b(" Go to "),M("a",{href:"http://captain."+t.master.env.CAPROVER_ROOT_DOMAIN,target:"_blank",class:"app-link"}," Admin Panel ",8,La),b(". ")]),Fa,Wa,M("li",null,[b(" Insert worker node public IP "),M("strong",null,k(c.value[c.value.length-1].publicIP.ip),1),b(" and add your private SSH Key. ")]),Ka])]),_:1}),s(C),s(oe,null,{default:i(()=>[s(W),s(ae,{color:"error",variant:"tonal",onClick:p[3]||(p[3]=O=>l.value=!1)},{default:i(()=>[b("Close")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):z("",!0)],64)}}}),Ha=M("strong",null,"Are you sure you want to delete the following deployments?",-1),ja={name:"TfDeploymentList",components:{VmDeploymentTable:He,IconActionBtn:I,K8sDeploymentTable:je,ManageK8SWorkerDialog:Ye,ManageCaproverWorkerDialog:Xe}},eo=U({...ja,props:{projectName:null},setup(t){const e=t,a=[{title:"Full Virtual Machine",value:"Fullvm",imgPath:"images/icons/vm.png"},{title:"Micro Virtual Machine",value:"VM",imgPath:"images/icons/vm.png"},{title:"Kubernetes",value:"Kubernetes",imgPath:"images/icons/kubernetes.png"},{title:"CapRover",value:"CapRover",imgPath:"images/icons/caprover.png"},{title:"Peertube",value:"Peertube",imgPath:"images/icons/peertube.png"},{title:"Funkwhale",value:"Funkwhale",imgPath:"images/icons/funkwhale.png"},{title:"Mattermost",value:"Mattermost",imgPath:"images/icons/mattermost.png"},{title:"Discourse",value:"Discourse",imgPath:"images/icons/discourse.png"},{title:"Taiga",value:"Taiga",imgPath:"images/icons/taiga.png"},{title:"Owncloud",value:"Owncloud",imgPath:"images/icons/owncloud.png"},{title:"Presearch",value:"Presearch",imgPath:"images/icons/presearch.png"},{title:"Subsquid",value:"Subsquid",imgPath:"images/icons/subsquid.png"},{title:"Casperlabs",value:"Casperlabs",imgPath:"images/icons/casperlabs.png"},{title:"Algorand",value:"Algorand",imgPath:"images/icons/algorand.png"},{title:"Node Pilot",value:"NodePilot",imgPath:"images/icons/vm.png"},{title:"Umbrel",value:"Umbrel",imgPath:"images/icons/umbrel.png"},{title:"Wordpress",value:"Wordpress",imgPath:"images/icons/wordpress.png"}],n=x(),o=w(),u=w(),l=w([]),m=w(!1),d=w(!1),c=w(),v=a.findIndex(S=>S.value===e.projectName),f=w(e.projectName?v:0);K(f,()=>l.value=[]);async function g(){var C;d.value=!1,m.value=!0;const S=await j(n.profile);for(const B of l.value)try{await _a(Q(S,{projectName:B.projectName}),{name:B.deploymentName,projectName:B.projectName})}catch(W){console.log("Error while deleting deployment",W.message)}l.value=[],(C=c.value)==null||C.loadDeployments(),m.value=!1}const{uid:y}=St(),p=It();return p==null||p.register(y,()=>{var S;return(S=c.value)==null?void 0:S.loadDeployments}),ht(()=>p==null?void 0:p.unregister(y)),(S,C)=>{const B=_("d-tabs"),W=_("v-btn"),ae=_("weblet-layout"),oe=_("v-card-title"),Z=_("v-chip"),D=_("v-card-text"),O=_("v-spacer"),Ze=_("v-card-actions"),xe=_("v-card"),et=_("v-dialog");return h(),V(F,null,[s(ae,{ref_key:"layout",ref:o},Pt({title:i(()=>{var r;return[b(" Deployment List "+k(S.$props.projectName?"("+(((r=a.find(P=>P.value===S.$props.projectName))==null?void 0:r.title)??S.$props.projectName)+")":""),1)]}),"footer-actions":i(()=>[s(W,{color:"error",variant:"outlined",disabled:l.value.length===0||m.value,"prepend-icon":"mdi-delete",onClick:C[5]||(C[5]=r=>d.value=!0)},{default:i(()=>[b(" Delete ")]),_:1},8,["disabled"])]),default:i(()=>[s(B,{tabs:a,"model-value":re(f),"onUpdate:modelValue":C[4]||(C[4]=r=>f.value=r),disabled:m.value,destroy:"","hide-tabs":!!S.$props.projectName},{Kubernetes:i(()=>[s(je,{projectName:a[re(f)].value,modelValue:l.value,"onUpdate:modelValue":C[3]||(C[3]=r=>l.value=r),deleting:m.value,ref_key:"table",ref:c},{actions:i(({item:r})=>[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:P=>o.value.openDialog(r==null?void 0:r.value,{SSH_KEY:"Public SSH Key",K3S_TOKEN:"K3S Token",K3S_DATA_DIR:"K3S Data Directory",K3S_FLANNEL_IFACE:"K3S Flannel Iface",K3S_NODE_NAME:"K3S Node Name",K3S_URL:"K3S URL"})},null,8,["onClick"]),s(I,{icon:"mdi-cog",tooltip:"Manage Workers",color:"secondary",onClick:P=>u.value=r.value.deploymentName},null,8,["onClick"]),u.value===r.value.deploymentName?(h(),$(Ye,{key:0,data:r.value,onClose:C[2]||(C[2]=P=>u.value=void 0),"onUpdate:k8s":P=>r.value.workers=P.workers},null,8,["data","onUpdate:k8s"])):z("",!0)]),_:1},8,["projectName","modelValue","deleting"])]),default:i(()=>[s(He,{projectName:a[re(f)].value,modelValue:l.value,"onUpdate:modelValue":C[1]||(C[1]=r=>l.value=r),deleting:m.value,ref_key:"table",ref:c},{"Fullvm-actions":i(({item:r})=>[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:P=>o.value.openDialog(r==null?void 0:r.value,{SSH_KEY:"Public SSH Key"})},null,8,["onClick"])]),"VM-actions":i(({item:r})=>[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:P=>o.value.openDialog(r==null?void 0:r.value,{SSH_KEY:"Public SSH Key"})},null,8,["onClick"])]),"CapRover-actions":i(({item:r})=>[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:P=>o.value.openDialog(r==null?void 0:r.value,{SWM_NODE_MODE:"Swarm Node Mode",PUBLIC_KEY:"Public SSH Key",CAPROVER_ROOT_DOMAIN:!1,CAPTAIN_IMAGE_VERSION:"Captain Image Version",DEFAULT_PASSWORD:"Default Password",CAPTAIN_IS_DEBUG:"Debug Mode"})},null,8,["onClick"]),s(I,{tooltip:"Admin Panel",color:"info",icon:"mdi-view-dashboard",href:"http://captain."+r.value[0].env.CAPROVER_ROOT_DOMAIN},null,8,["href"]),s(I,{icon:"mdi-cog",tooltip:"Manage Workers",color:"secondary",onClick:P=>u.value=r.value.deploymentName},null,8,["onClick"]),u.value===r.value.deploymentName?(h(),$(Xe,{key:0,master:r.value[0],data:r.value.slice(1),onClose:C[0]||(C[0]=P=>u.value=void 0),"onUpdate:caprover":P=>r.value=P},null,8,["master","data","onUpdate:caprover"])):z("",!0)]),"Peertube-actions":i(({item:r})=>[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:P=>o.value.openDialog(r==null?void 0:r.value,{SSH_KEY:"Public SSH Key",PEERTUBE_ADMIN_EMAIL:"Peertube Admin Email",PT_INITIAL_ROOT_PASSWORD:"Peertube Initial Root Password",PEERTUBE_WEBSERVER_HOSTNAME:"Peertube Webserver Hostname"})},null,8,["onClick"]),s(I,{tooltip:"Preview",color:"info",icon:"mdi-web",href:"https://"+r.value[0].env.PEERTUBE_WEBSERVER_HOSTNAME},null,8,["href"])]),"Funkwhale-actions":i(({item:r})=>[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:P=>o.value.openDialog(r==null?void 0:r.value,{FUNKWHALE_HOSTNAME:"Funkwhale Hostname",DJANGO_SUPERUSER_EMAIL:"Django Superuser Email",DJANGO_SUPERUSER_USERNAME:"Diango Superuser Username",DJANGO_SUPERUSER_PASSWORD:"Django Superuser Password"})},null,8,["onClick"]),s(I,{tooltip:"Preview",color:"info",icon:"mdi-web",href:"https://"+r.value[0].env.FUNKWHALE_HOSTNAME},null,8,["href"])]),"Taiga-actions":i(({item:r})=>[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:P=>o.value.openDialog(r==null?void 0:r.value,{SSH_KEY:"Public SSH Key",DOMAIN_NAME:"Domain Name",ADMIN_USERNAME:"Admin Username",ADMIN_PASSWORD:"Admin Password",ADMIN_EMAIL:"Admin Email",DEFAULT_FROM_EMAIL:"Default Form Email",EMAIL_USE_TLS:"Email Use TLS",EMAIL_USE_SSL:"Email Use SSL",EMAIL_HOST:"Email Host",EMAIL_PORT:"Email Port",EMAIL_HOST_USER:"Email Host User",EMAIL_HOST_PASSWORD:"Email Host Password"})},null,8,["onClick"]),s(I,{tooltip:"Admin Panel",color:"info",icon:"mdi-view-dashboard",href:"http://"+r.value[0].env.DOMAIN_NAME+"/admin/"},null,8,["href"]),s(I,{tooltip:"Preview",color:"secondary",icon:"mdi-web",href:"https://"+r.value[0].env.DOMAIN_NAME},null,8,["href"])]),"Presearch-actions":i(({item:r})=>[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:P=>o.value.openDialog(r==null?void 0:r.value,{SSH_KEY:"Public SSH Key",PRESEARCH_REGISTRATION_CODE:"Presearch Registration Code",PRESEARCH_BACKUP_PRI_KEY:"Presearch Backup Private Key",PRESEARCH_BACKUP_PUB_KEY:"Presearch Backup Public Key"})},null,8,["onClick"])]),"Mattermost-actions":i(({item:r})=>[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:P=>o.value.openDialog(r==null?void 0:r.value,{DB_PASSWORD:"Database Password",SITE_URL:"Site URL",SMTPUsername:"SMTP Username",SMTPPassword:"SMTP Password",SMTPServer:"SMTP Server",SMTPPort:"SMTP Port",SSH_KEY:"Public SSH Key",MATTERMOST_DOMAIN:"Mattermost Domain"})},null,8,["onClick"]),s(I,{tooltip:"Preview",color:"info",icon:"mdi-web",href:r.value[0].env.SITE_URL},null,8,["href"])]),"Discourse-actions":i(({item:r})=>[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:P=>o.value.openDialog(r==null?void 0:r.value,{SSH_KEY:"Public SSH Key",DISCOURSE_HOSTNAME:"Discourse Hostname",DISCOURSE_DEVELOPER_EMAILS:"Discourse Developer Emails",DISCOURSE_SMTP_ADDRESS:"Discourse SMTP Address",DISCOURSE_SMTP_PORT:"Discourse SMTP Port",DISCOURSE_SMTP_ENABLE_START_TLS:"Discourse SMTP Enable Start TLS",DISCOURSE_SMTP_USER_NAME:"Discourse SMTP Username",DISCOURSE_SMTP_PASSWORD:"Discourse SMTP Password",THREEBOT_PRIVATE_KEY:"Threebot Private Key",FLASK_SECRET_KEY:"Flask Secret Key"})},null,8,["onClick"]),s(I,{tooltip:"Preview",color:"info",icon:"mdi-web",href:"https://"+r.value[0].env.DISCOURSE_HOSTNAME},null,8,["href"])]),"Casperlabs-actions":i(({item:r})=>[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:P=>o.value.openDialog(r==null?void 0:r.value,{SSH_KEY:"Public SSH Key",CASPERLABS_HOSTNAME:"Casperlabs Hostname"})},null,8,["onClick"]),s(I,{tooltip:"Preview",color:"info",icon:"mdi-web",href:"https://"+r.value[0].env.CASPERLABS_HOSTNAME},null,8,["href"])]),"Owncloud-actions":i(({item:r})=>[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:P=>o.value.openDialog(r==null?void 0:r.value,{SSH_KEY:"Public SSH Key",OWNCLOUD_DOMAIN:"Owncloud Domain",OWNCLOUD_ADMIN_USERNAME:"Owncloud Admin Username",OWNCLOUD_ADMIN_PASSWORD:"Owncloud Admin Password",OWNCLOUD_MAIL_SMTP_SECURE:"Owncloud Mail SMTP Secure",OWNCLOUD_MAIL_DOMAIN:"Owncloud Mail Domain",OWNCLOUD_MAIL_FROM_ADDRESS:"Owncloud Mail From Address",OWNCLOUD_MAIL_SMTP_HOST:"Owncloud Mail SMTP Host",OWNCLOUD_MAIL_SMTP_PORT:"Owncloud Mail SMTP Port",OWNCLOUD_MAIL_SMTP_NAME:"Owncloud Mail SMTP Name",OWNCLOUD_MAIL_SMTP_PASSWORD:"Owncloud Mail SMTP Password"})},null,8,["onClick"]),s(I,{tooltip:"Preview",color:"info",icon:"mdi-web",href:"https://"+r.value[0].env.OWNCLOUD_DOMAIN},null,8,["href"])]),"Subsquid-actions":i(({item:r})=>[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:P=>o.value.openDialog(r==null?void 0:r.value,{SSH_KEY:"Public SSH Key",CHAIN_ENDPOINT:"Chain Endpoint",SUBSQUID_WEBSERVER_HOSTNAME:"Subsquid Webserver Hostname"})},null,8,["onClick"]),s(I,{tooltip:"Preview",color:"info",icon:"mdi-web",href:"https://"+r.value[0].env.SUBSQUID_WEBSERVER_HOSTNAME+"/graphql"},null,8,["href"])]),"Algorand-actions":i(({item:r})=>[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:P=>o.value.openDialog(r==null?void 0:r.value,{SSH_KEY:"Public SSH Key",NETWORK:"Network",NODE_TYPE:"Node Type",ACCOUNT_MNEMONICS:"Account Mnemonics",FIRST_ROUND:"First Round",LAST_ROUND:"Last Round"})},null,8,["onClick"])]),"NodePilot-actions":i(({item:r})=>{var P;return[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:tt=>o.value.openDialog(r==null?void 0:r.value,{SSH_KEY:"Public SSH Key"})},null,8,["onClick"]),s(I,{tooltip:"Visit",color:"info",icon:"mdi-web",href:"http://"+((P=r.value[0].publicIP)!=null&&P.ip?r.value[0].publicIP.ip.slice(0,-3):"["+r.value[0].planetary+"]")},null,8,["href"])]}),"Umbrel-actions":i(({item:r})=>{var P;return[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:tt=>o.value.openDialog(r==null?void 0:r.value,{SSH_KEY:"Public SSH Key",USERNAME:"Username",PASSWORD:"Password",UMBREL_DISK:"Umbrel Disk"})},null,8,["onClick"]),s(I,{tooltip:"Admin Panel",color:"info",icon:"mdi-view-dashboard",href:"http://"+((P=r.value[0].publicIP)!=null&&P.ip?r.value[0].publicIP.ip.slice(0,-3):"["+r.value[0].planetary+"]")},null,8,["href"])]}),"Wordpress-actions":i(({item:r})=>[s(I,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:P=>o.value.openDialog(r==null?void 0:r.value,{SSH_KEY:"Public SSH Key",MYSQL_USER:"Mysql User",MYSQL_PASSWORD:"Mysql Password",ADMIN_EMAIL:"Admin Email",WP_URL:"WP URL"})},null,8,["onClick"]),s(I,{tooltip:"Preview",color:"info",icon:"mdi-web",href:"https://"+r.value[0].env.WP_URL},null,8,["href"]),s(I,{tooltip:"Admin Panel",color:"secondary",icon:"mdi-view-dashboard",href:"https://"+r.value[0].env.WP_URL+"/wp-admin"},null,8,["href"])]),_:1},8,["projectName","modelValue","deleting"])]),_:1},8,["model-value","disabled","hide-tabs"])]),_:2},[S.$props.projectName?void 0:{name:"subtitle",fn:i(()=>[b(" List your own deployments for different solutions ")]),key:"0"}]),1536),s(et,{modelValue:d.value,"onUpdate:modelValue":C[7]||(C[7]=r=>d.value=r),scrollable:"",width:"50%"},{default:i(()=>[s(xe,null,{default:i(()=>[s(oe,null,{default:i(()=>[Ha]),_:1}),s(D,null,{default:i(()=>[(h(!0),V(F,null,Me(l.value,r=>(h(),$(Z,{class:"ma-1",color:"primary",key:r.deploymentName},{default:i(()=>[b(k(r.deploymentName),1)]),_:2},1024))),128))]),_:1}),s(Ze,null,{default:i(()=>[s(O),s(W,{color:"error",variant:"outlined",onClick:g},{default:i(()=>[b("Delete")]),_:1}),s(W,{color:"error",variant:"tonal",onClick:C[6]||(C[6]=r=>d.value=!1)},{default:i(()=>[b("Close")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{E as P,ye as _,eo as a,qe as b,Ge as c,Qa as d,Ea as e,xa as f,Je as g,Aa as h,Qe as i,ya as j,Xa as k,Za as l,Ja as m,ue as r};
