import{S as Me,T as B,d as R,b as y,o as N,c as O,w as n,f as a,j as $,U as Ve,z as te,a as Z,r as w,P as ie,y as j,A as I,e as _,s as C,t as D,D as K,V as Ce,W as Oe,G as Q,F as U,X as he,Y as Ie,Z as Ae,$ as $e,a0 as Re,B as X,h as L,l as H,m as se,i as ue,k as F,n as z,g as de,E as me,N as Ue,p as J,a1 as Te,a2 as Le,a3 as Ke,Q as We}from"./index-b7afd9dd.js";import{S as He,P as V,l as ce,c as Be,N as je,r as x,_ as ee,a as Fe,b as ze}from"./root_fs-caa8e3a5.js";import{f as pe,_ as W}from"./list_table.vue_vue_type_script_setup_true_lang-dd240133.js";function Dl(t,e={}){return t.capacity.filterNodes({gateway:!0,...e}).catch(()=>[])}function Ge(t){return He[t.projectName]+t.twinId+t.deploymentName.toLowerCase()}async function El(t,e){const o=new Me;return o.name=e.name,o.node_id=e.nodeId,o.tls_passthrough=e.tlsPassthrough||!1,o.backends=e.backends,o.solutionProviderID=1,t.gateway.deploy_name(o)}async function Ml(t,e){const o=await t.machines.delete({name:e});if(o.deleted.length===0)throw new Error(`Failed to delete deployment with name "${e}".`);return o}async function Ye(t,e){if(e.projectName===V.QVM){const o=await ce(t,e.name);o[0].mounts.length&&await t.qsfs_zdbs.delete({name:o[0].mounts[0].name})}return Je(e.projectName)&&await qe(t,e),e.projectName===V.Kubernetes?t.k8s.delete({name:e.name}):t.machines.delete({name:e.name})}async function qe(t,e){const o=Ge({deploymentName:e.name,projectName:e.projectName,twinId:t.twinId});for(const c of[e.projectName,V.Gateway,""])if(await Qe(B(t,{projectName:c}),o)){B(t,{projectName:e.projectName});return}throw new Error(`Can't delete gateway contracts with name ${o}`)}async function Qe(t,e){const{deleted:o}=await t.gateway.delete_name({name:e});return o.length>0}function Je(t){const e=[V.Discourse,V.Funkwhale,V.Mastodon,V.Mattermost,V.Owncloud,V.Peertube,V.Subsquid,V.Taiga,V.Wordpress];return e.includes(t)?!0:e.map(o=>o.toLowerCase()).includes(t)}const xe={name:"IconActionBtn"},g=R({...xe,props:{tooltip:null,icon:null,color:null,href:null},emits:["click"],setup(t){return(e,o)=>{const c=y("v-btn"),r=y("v-tooltip");return N(),O(r,{text:t.tooltip,location:"bottom"},{activator:n(({props:p})=>[a(c,$({onClick:o[0]||(o[0]=Ve(s=>e.$emit("click",s),["stop"])),icon:t.icon,color:t.color},p,{href:t.href,target:t.href?"_blank":void 0}),null,16,["icon","color","href","target"])]),_:1},8,["text"])}}});async function oe(t,e={}){const o=await t.machines.list();let c=o.length;const r=o.map(i=>t.machines.getObj(i).catch(f=>(console.log(`%c[Error] failed to load deployment with name ${i}:
${te(f,"No errors were provided.")}`,"color: rgb(207, 102, 121)"),null))),s=(await Promise.all(r)).map((i,f)=>(i&&(i.deploymentName=o[f],i.projectName=t.clientOptions.projectName,i.forEach(S=>{S.deploymentName=o[f],S.projectName=t.clientOptions.projectName})),i)).filter(i=>i&&i.length>0).filter(i=>e.filter&&!e.filter(i)?(c--,!1):!0),m=await Promise.all(s.map(i=>t.contracts.getConsumption({id:i[0].contractId}).catch(()=>{}))),u=s.map((i,f)=>(i[0].billing=pe(m[f]),i));return{count:c,items:u}}async function ae(t){const e=await t.k8s.list(),o=e.map(m=>t.k8s.getObj(m).catch(u=>(console.log(`%c[Error] failed to load deployment with name ${m}:
${te(u,"No errors were provided.")}`,"color: rgb(207, 102, 121)"),null))),r=(await Promise.all(o)).map((m,u)=>(m&&(m.deploymentName=e[u],m.projectName=t.clientOptions.projectName),m)).filter(m=>m&&m.masters.length>0),p=await Promise.all(r.map(m=>t.contracts.getConsumption({id:m.masters[0].contractId}).catch(()=>{}))),s=r.map((m,u)=>(m.masters[0].billing=pe(p[u]),m));return{count:e.length,items:s}}function ve(...t){return t.reduce((e,o)=>(e.count+=o.count,e.items=e.items.concat(o.items),e),{count:0,items:[]})}const Xe={name:"VmDeploymentTable",components:{ListTable:W}},fe=R({...Xe,props:{projectName:null,modelValue:null,deleting:{type:Boolean}},emits:["update:model-value"],setup(t,{expose:e}){const o=t,c=Z(),r=w(!1),p=w(),s=w([]);ie(m);async function m(){s.value=[],r.value=!0;const u=await j(c.profile,o.projectName),i=await oe(u),f=await oe(B(u,{projectName:o.projectName.toLowerCase()})),S=o.projectName===V.VM?void 0:([d])=>d.flist.replace(/-/g,"").includes(o.projectName.toLowerCase()),k=o.projectName===V.Fullvm?{count:0,items:[]}:await oe(B(u,{projectName:""}),{filter:S}),v=ve(i,f,k);p.value=v.count,s.value=v.items,r.value=!1}return e({loadDeployments:m}),(u,i)=>{const f=y("v-alert"),S=y("v-tooltip"),k=y("v-chip"),v=y("v-btn-group");return N(),I(U,null,[!r.value&&p.value&&s.value.length<p.value?(N(),O(f,{key:0,type:"warning",variant:"tonal"},{default:n(()=>[_(" Failed to load "),C("strong",null,D(p.value-s.value.length),1),_(" deployment"+D(p.value-s.value.length>1?"s":"")+". ",1)]),_:1})):K("",!0),a(W,{headers:[{title:"#",key:"index"},{title:"PLACEHOLDER",key:"data-table-select"},{title:"Name",key:"name"},{title:"Public IPv4",key:"ipv4"},{title:"Public IPv6",key:"ipv6"},{title:"Planetary Network IP",key:"planetary"},{title:"Flist",key:"flist"},{title:"Billing Rate",key:"billing"},{title:"Actions",key:"actions"}],items:s.value,loading:r.value,deleting:t.deleting,"model-value":u.$props.modelValue,"onUpdate:modelValue":i[0]||(i[0]=d=>u.$emit("update:model-value",d)),"no-data-text":`No ${t.projectName} deployments found on this account.`},{["item.index"]:n(({item:d})=>[_(D(s.value.indexOf(d==null?void 0:d.value)+1),1)]),["item.name"]:n(({item:d})=>[_(D(d.value[0].name),1)]),["item.ipv4"]:n(({item:d})=>{var P;return[_(D(((P=d.value[0].publicIP)==null?void 0:P.ip)||"None"),1)]}),["item.ipv6"]:n(({item:d})=>{var P;return[_(D(((P=d.value[0].publicIP)==null?void 0:P.ip6)||"None"),1)]}),["item.planetary"]:n(({item:d})=>[_(D(d.value[0].planetary||"None"),1)]),["item.flist"]:n(({item:d})=>[a(S,{text:d.value[0].flist,location:"bottom right"},{activator:n(({props:P})=>[C("p",Ce(Oe(P)),D(d.value[0].flist.replace("https://hub.grid.tf/","").replace(".flist","")),17)]),_:2},1032,["text"])]),["item.billing"]:n(({item:d})=>[_(D(d.value[0].billing),1)]),["item.actions"]:n(({item:d})=>[t.deleting&&(u.$props.modelValue||[]).includes(d.value)?(N(),O(k,{key:0,color:"error",variant:"tonal"},{default:n(()=>[_(" Deleting... ")]),_:1})):(N(),O(v,{key:1,variant:"tonal"},{default:n(()=>[Q(u.$slots,t.projectName+"-actions",{item:d})]),_:2},1024))]),_:2},1032,["items","loading","deleting","model-value","no-data-text"])],64)}}}),Ze={name:"K8sDeploymentTable",components:{ListTable:W}},_e=R({...Ze,props:{projectName:null,modelValue:null,deleting:{type:Boolean}},emits:["update:model-value"],setup(t,{expose:e}){const o=t,c=Z(),r=w(),p=w([]),s=w(!1);ie(m);async function m(){p.value=[],s.value=!0;const u=await j(c.profile,o.projectName),i=await ae(u),f=await ae(B(u,{projectName:o.projectName.toLowerCase()})),S=await ae(B(u,{projectName:""})),k=ve(i,f,S);r.value=k.count,p.value=k.items,s.value=!1}return e({loadDeployments:m}),(u,i)=>{const f=y("v-alert"),S=y("v-chip"),k=y("v-btn-group");return N(),I(U,null,[!s.value&&r.value&&p.value.length<r.value?(N(),O(f,{key:0,type:"warning",variant:"tonal"},{default:n(()=>[_(" Failed to load "),C("strong",null,D(r.value-p.value.length),1),_(" deployment"+D(r.value-p.value.length>1?"s":"")+". ",1)]),_:1})):K("",!0),a(W,{headers:[{title:"#",key:"index"},{title:"PLACEHOLDER",key:"data-table-select"},{title:"Name",key:"name"},{title:"Public IPv4",key:"ipv4"},{title:"Public IPv6",key:"ipv6"},{title:"Planetary Network IP",key:"planetary"},{title:"Workers",key:"workers"},{title:"Billing Rate",key:"billing"},{title:"Actions",key:"actions"}],items:p.value,loading:s.value,deleting:t.deleting,"model-value":u.$props.modelValue,"onUpdate:modelValue":i[0]||(i[0]=v=>u.$emit("update:model-value",v)),"no-data-text":"No Kubernetes deployments found on this account."},{["item.index"]:n(({item:v})=>[_(D(p.value.indexOf(v==null?void 0:v.value)+1),1)]),["item.name"]:n(({item:v})=>[_(D(v.value.masters[0].name),1)]),["item.ipv4"]:n(({item:v})=>{var d;return[_(D(((d=v.value.masters[0].publicIP)==null?void 0:d.ip)||"None"),1)]}),["item.ipv6"]:n(({item:v})=>{var d;return[_(D(((d=v.value.masters[0].publicIP)==null?void 0:d.ip6)||"None"),1)]}),["item.planetary"]:n(({item:v})=>[_(D(v.value.masters[0].planetary||"None"),1)]),["item.workers"]:n(({item:v})=>[_(D(v.value.workers.length),1)]),["item.billing"]:n(({item:v})=>[_(D(v.value.masters[0].billing),1)]),["item.actions"]:n(({item:v})=>[t.deleting&&(u.$props.modelValue||[]).includes(v.value)?(N(),O(S,{key:0,color:"error",variant:"tonal"},{default:n(()=>[_(" Deleting... ")]),_:1})):(N(),O(k,{key:1,variant:"tonal"},{default:n(()=>[Q(u.$slots,"actions",{item:v})]),_:2},1024))]),_:2},1032,["items","loading","deleting","model-value","no-data-text"])],64)}}});async function Vl(t,e){const o=new je,c=new Ie;c.name=e.name,c.secret=e.clusterToken;const r=await Promise.all([re(t,e.master,o),Promise.all(e.workers.map(p=>re(t,p,o)))]);return c.network=Be({addAccess:!0}),c.masters=[r[0]],c.workers=r[1],c.metadata=e.metadata,c.description=e.description,c.ssh_key=e.sshKey,await t.k8s.deploy(c),ne(t,c.name)}function ne(t,e){return t.k8s.getObj(e)}async function re(t,e,o){const c={cru:e.cpu,mru:Math.round(e.memory/1024),farmId:e.farm.farmID,farmName:e.farm.name,sru:e.diskSize+e.rootFsSize,publicIPs:e.ipv4,availableFor:t.twinId,country:e.farm.country},r=new Ae;return r.name=e.name,r.node_id=await o.pick(await t.capacity.filterNodes(c)),r.cpu=e.cpu,r.disk_size=e.diskSize,r.memory=e.memory,r.public_ip=e.ipv4,r.public_ip6=e.ipv6,r.rootfs_size=e.rootFsSize,r.planetary=e.planetary,r.solutionProviderID=1,r}async function el(t,e){const o={cru:e.cpu,mru:Math.round(e.memory/1024),farmId:e.farm.farmID,farmName:e.farm.name,sru:e.diskSize+e.rootFsSize,publicIPs:e.ipv4,availableFor:t.twinId,country:e.farm.country},c=new $e;return c.deployment_name=e.deploymentName,c.name=e.name,c.cpu=e.cpu,c.memory=e.memory,c.disk_size=e.diskSize,c.public_ip=e.ipv4,c.public_ip6=e.ipv6,c.planetary=e.planetary,c.rootfs_size=e.rootFsSize,c.node_id=c.node_id=+he(await t.capacity.filterNodes(o)).nodeId,c.solutionProviderID=1,await t.k8s.add_worker(c),ne(t,e.deploymentName)}async function ll(t,e){const o=new Re;o.deployment_name=e.deploymentName,o.name=e.name;const c=await t.k8s.delete_worker(o);if(!c.deleted&&!c.updated)throw new Error("Failed to delete worker");return c}const ol={class:"d-flex"},al={style:{width:"100%"},class:"mr-4"},tl={name:"RootFsSize"},ye=R({...tl,props:{cpu:null,memory:null,modelValue:null},emits:["update:model-value"],setup(t,{emit:e}){const o=t,c=w(),r=w(x(o.cpu??0,o.memory??0));X(r,m=>e("update:model-value",m),{immediate:!0});const p=w(!1);X(()=>[p.value,o.cpu||0,o.memory||0],async([m,u,i])=>{await c.value.validate(r.value),m||(r.value=x(u,i))});function s(m){const u=x(o.cpu??0,o.memory??0);return H(`Root File System min value is ${u}GB.`,u)(m)}return(m,u)=>{const i=y("v-text-field"),f=y("input-validator"),S=y("v-switch"),k=y("v-tooltip");return N(),I("div",ol,[C("div",al,[a(f,{value:r.value,rules:[L("Root File System is required."),s],ref_key:"input",ref:c},{default:n(({props:v})=>[a(i,$({label:"Root File System (GB)",type:"number",disabled:!p.value,modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=d=>r.value=d),modelModifiers:{number:!0}},v),null,16,["disabled","modelValue"])]),_:1},8,["value","rules"])]),a(k,{text:"Toggle editing root filesystem size"},{activator:n(({props:v})=>[a(S,$({inset:"",color:"primary",modelValue:p.value,"onUpdate:modelValue":u[1]||(u[1]=d=>p.value=d)},v),null,16,["modelValue"])]),_:1})])}}});function nl(t="WR"+de(9)){return{name:t,cpu:2,memory:4096,diskSize:100,ipv4:!1,ipv6:!1,planetary:!0,rootFsSize:2,farm:void 0}}const rl={name:"K8SWorker",components:{SelectFarm:ee,RootFsSize:ye}},Se=R({...rl,props:{modelValue:null},setup(t){return(e,o)=>{const c=y("v-text-field"),r=y("input-validator"),p=y("v-switch");return N(),I(U,null,[a(r,{value:e.$props.modelValue.name,rules:[L("Name is required."),se("Name minimum length is 2 chars.",2),ue("Name max length is 15 chars.",15)]},{default:n(({props:s})=>[a(c,$({label:"Name",modelValue:e.$props.modelValue.name,"onUpdate:modelValue":o[0]||(o[0]=m=>e.$props.modelValue.name=m)},s),null,16,["modelValue"])]),_:1},8,["value","rules"]),a(r,{value:e.$props.modelValue.cpu,rules:[L("CPU is required."),F("CPU must be a valid integer."),H("CPU min is 2 cores.",2),z("CPU max is 32 cores.",32)]},{default:n(({props:s})=>[a(c,$({label:"CPU (vCores)",type:"number",modelValue:e.$props.modelValue.cpu,"onUpdate:modelValue":o[1]||(o[1]=m=>e.$props.modelValue.cpu=m),modelModifiers:{number:!0}},s),null,16,["modelValue"])]),_:1},8,["value","rules"]),a(r,{value:e.$props.modelValue.memory,rules:[L("Memory is required."),F("Memory must be a valid integer."),H("Minimum allowed memory is 256 MB.",256),z("Maximum allowed memory is 256 GB.",256*1024)]},{default:n(({props:s})=>[a(c,$({label:"Memory (MB)",type:"number",modelValue:e.$props.modelValue.memory,"onUpdate:modelValue":o[2]||(o[2]=m=>e.$props.modelValue.memory=m),modelModifiers:{number:!0}},s),null,16,["modelValue"])]),_:1},8,["value","rules"]),a(r,{value:e.$props.modelValue.diskSize,rules:[L("Disk size is required."),F("Disk size must be a valid integer."),H("Minimum allowed disk size is 1 GB.",1),z("Maximum allowed disk size is 10000 GB.",1e4)]},{default:n(({props:s})=>[a(c,$({label:"Disk Size (GB)",type:"number",modelValue:e.$props.modelValue.diskSize,"onUpdate:modelValue":o[3]||(o[3]=m=>e.$props.modelValue.diskSize=m),modelModifiers:{number:!0}},s),null,16,["modelValue"])]),_:1},8,["value","rules"]),a(p,{label:"Public IPv4",inset:"",color:"primary",modelValue:e.$props.modelValue.ipv4,"onUpdate:modelValue":o[4]||(o[4]=s=>e.$props.modelValue.ipv4=s)},null,8,["modelValue"]),a(p,{label:"Public IPv6",inset:"",color:"primary",modelValue:e.$props.modelValue.ipv6,"onUpdate:modelValue":o[5]||(o[5]=s=>e.$props.modelValue.ipv6=s)},null,8,["modelValue"]),a(p,{label:"Planetary Network",inset:"",color:"primary",modelValue:e.$props.modelValue.planetary,"onUpdate:modelValue":o[6]||(o[6]=s=>e.$props.modelValue.planetary=s)},null,8,["modelValue"]),a(ye,{cpu:e.$props.modelValue.cpu,memory:e.$props.modelValue.memory,modelValue:e.$props.modelValue.rootFsSize,"onUpdate:modelValue":o[7]||(o[7]=s=>e.$props.modelValue.rootFsSize=s),modelModifiers:{number:!0}},null,8,["cpu","memory","modelValue"]),a(ee,{filters:{cpu:e.$props.modelValue.cpu,memory:e.$props.modelValue.memory,publicIp:e.$props.modelValue.ipv4,ssd:e.$props.modelValue.diskSize+e.$props.modelValue.rootFsSize},modelValue:e.$props.modelValue.farm,"onUpdate:modelValue":o[8]||(o[8]=s=>e.$props.modelValue.farm=s)},null,8,["filters","modelValue"])],64)}}}),il={name:"ManageWorkerDialog"},le=R({...il,props:{workers:null,selectedWorkers:null,deleting:{type:Boolean}},emits:["close","delete","deploy","back"],setup(t,{emit:e}){const o=t,c=w(),r=w(o.workers.length===0?1:0),p=w(!0),s=w(!1);function m(){s.value=!1,e("delete",u=>{u.length===0&&(r.value=1)})}return(u,i)=>{const f=y("v-btn"),S=y("v-btn-toggle"),k=y("form-validator"),v=y("weblet-layout"),d=y("v-dialog"),P=y("v-card-title"),E=y("v-chip"),A=y("v-card-text"),T=y("v-spacer"),G=y("v-card-actions"),Y=y("v-card");return N(),I(U,null,[a(d,{"model-value":"",scrollable:"",width:"70%",persistent:""},{default:n(()=>[a(v,{ref_key:"layout",ref:c,onBack:i[5]||(i[5]=M=>u.$emit("back"))},{title:n(()=>[Q(u.$slots,"title")]),"header-actions":n(()=>{var M;return[a(S,{divided:"",modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=q=>r.value=q),mandatory:"",disabled:((M=c.value)==null?void 0:M.status)||t.deleting,class:"mt-2"},{default:n(()=>[a(f,{variant:"outlined",disabled:t.workers.length===0},{default:n(()=>[_(" List ")]),_:1},8,["disabled"]),a(f,{variant:"outlined"},{default:n(()=>[_(" Deploy ")]),_:1})]),_:1},8,["modelValue","disabled"])]}),"footer-actions":n(()=>[r.value===0?(N(),O(f,{key:0,color:"error",variant:"outlined","prepend-icon":"mdi-delete",disabled:t.selectedWorkers.length===0||t.deleting,onClick:i[2]||(i[2]=M=>s.value=!0)},{default:n(()=>[_(" Delete ")]),_:1},8,["disabled"])):K("",!0),r.value===1?(N(),O(f,{key:1,color:"primary",variant:"tonal",disabled:!p.value,onClick:i[3]||(i[3]=M=>u.$emit("deploy",c.value))},{default:n(()=>[_(" Deploy ")]),_:1},8,["disabled"])):K("",!0),t.deleting?K("",!0):(N(),O(f,{key:2,color:"error",variant:"tonal",onClick:i[4]||(i[4]=M=>u.$emit("close"))},{default:n(()=>[_(" Close ")]),_:1}))]),default:n(()=>[r.value===0?Q(u.$slots,"list",{key:0}):(N(),O(k,{key:1,modelValue:p.value,"onUpdate:modelValue":i[1]||(i[1]=M=>p.value=M)},{default:n(()=>[Q(u.$slots,"deploy")]),_:3},8,["modelValue"]))]),_:3},512)]),_:3}),a(d,{width:"50%",persistent:"",modelValue:s.value,"onUpdate:modelValue":i[7]||(i[7]=M=>s.value=M)},{default:n(()=>[a(Y,null,{default:n(()=>[a(P,{class:"text-h5"},{default:n(()=>[_(" Are you sure you want to delete the following workers? ")]),_:1}),a(A,null,{default:n(()=>[(N(!0),I(U,null,me(t.selectedWorkers,M=>(N(),O(E,{class:"ma-1",color:"primary",label:"",key:M.name},{default:n(()=>[_(D(M.name),1)]),_:2},1024))),128))]),_:1}),a(G,null,{default:n(()=>[a(T),a(f,{color:"error",variant:"text",onClick:m},{default:n(()=>[_(" Remove ")]),_:1}),a(f,{color:"error",variant:"tonal",onClick:i[6]||(i[6]=M=>s.value=!1)},{default:n(()=>[_(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),sl={name:"ManageK8SWorkerDialog",components:{K8SWorker:Se,ListTable:W,ManageWorkerDialog:le}},ke=R({...sl,props:{data:null},emits:["close","update:k8s"],setup(t,{emit:e}){const o=t,c=Z(),r=w(nl()),p=w([]),s=w(!1);function m(f){return f.reduce((S,k)=>S+k.size,0)/1024**3}async function u(f){f.setStatus("deploy");const S=await j(c.profile,V.Kubernetes);console.log(o.data.deploymentName),el(S,{...r.value,deploymentName:o.data.deploymentName}).then(k=>{f.setStatus("success",`Successfully add a new worker to '${o.data.deploymentName}' Cluster.`),e("update:k8s",k)}).catch(k=>{const v=typeof k=="string"?k:k.message;f.setStatus("failed",v)})}async function i(f){s.value=!0;const S=await j(c.profile,V.Kubernetes);for(const v of p.value)try{await ll(S,{deploymentName:o.data.deploymentName,name:v.name})}catch(d){console.log("Error while deleting worker",d)}p.value=[];const k=await ne(S,o.data.deploymentName);e("update:k8s",k),f(k.workers),s.value=!1}return(f,S)=>(N(),O(le,{workers:t.data.workers,selectedWorkers:p.value,deleting:s.value,onClose:S[2]||(S[2]=k=>f.$emit("close")),onDeploy:u,onDelete:i},{title:n(()=>[_("Manage Kubernetes("+D(t.data.deploymentName)+") Workers",1)]),list:n(()=>[a(W,{headers:[{title:"#",key:"index"},{title:"PLACEHOLDER",key:"data-table-select"},{title:"Contract ID",key:"contractId"},{title:"Name",key:"name"},{title:"Planetary Network IP",key:"planetary"},{title:"CPU(vCores)",key:"capacity.cpu"},{title:"Memory(MB)",key:"capacity.memory"},{title:"Disk(GB)",key:"disk"}],items:t.data.workers,loading:!1,deleting:s.value,modelValue:p.value,"onUpdate:modelValue":S[0]||(S[0]=k=>p.value=k)},{["item.index"]:n(({item:k})=>[_(D(t.data.workers.indexOf(k==null?void 0:k.value)+1),1)]),["item.disk"]:n(({item:k})=>[_(D(m(k.value.mounts)),1)]),_:2},1032,["headers","items","deleting","modelValue"])]),deploy:n(()=>[a(Se,{modelValue:r.value,"onUpdate:modelValue":S[1]||(S[1]=k=>r.value=k)},null,8,["modelValue"])]),_:1},8,["workers","selectedWorkers","deleting"]))}}),ul={key:0},dl={name:"SelectSolutionFlavor"},ge=R({...dl,props:{minimum:{type:Object,default:()=>({cpu:1,memory:1024,disk:100})},standard:{type:Object,default:()=>({cpu:2,memory:1024*2,disk:250})},recommended:{type:Object,default:()=>({cpu:4,memory:1024*4,disk:500})}},emits:["update:model-value"],setup(t,{emit:e}){const o=t,c=Ue(()=>{const{minimum:u,standard:i,recommended:f}=o;return[{title:`Minimum(CPU: ${u.cpu} vCores, Memory: ${u.memory} MB, Disk: ${u.disk} GB)`,value:u},{title:`Standard(CPU: ${i.cpu} vCores, Memory: ${i.memory} MB, Disk: ${i.disk} GB)`,value:i},{title:`Recommended(CPU: ${f.cpu} vCores, Memory: ${f.memory} MB, Disk: ${f.disk} GB)`,value:f},{title:"Custom",value:"custom"}]}),r=w(c.value[0].value),p=w(),s=w(),m=w();return X(r,u=>{u==="custom"||typeof u=="string"||(p.value=u.cpu,s.value=u.memory,m.value=u.disk)},{immediate:!0}),X([p,s,m],([u,i,f])=>{e("update:model-value",u&&i&&f?{cpu:u,memory:i,disk:f}:void 0)},{immediate:!0}),(u,i)=>{const f=y("v-select"),S=y("v-text-field"),k=y("input-validator");return N(),I(U,null,[a(f,{label:"Select",items:J(c),modelValue:r.value,"onUpdate:modelValue":i[0]||(i[0]=v=>r.value=v)},null,8,["items","modelValue"]),r.value==="custom"?(N(),I("div",ul,[a(k,{value:p.value,rules:[L("CPU is required."),F("CPU must be a valid integer."),H("CPU min is 1 cores.",1),z("CPU max is 32 cores.",32)]},{default:n(({props:v})=>[a(S,$({type:"number",label:"CPU (vCores)",modelValue:p.value,"onUpdate:modelValue":i[1]||(i[1]=d=>p.value=d),modelModifiers:{number:!0}},v),null,16,["modelValue"])]),_:1},8,["value","rules"]),a(k,{value:s.value,rules:[L("Memory is required."),F("Memory must be a valid integer."),H("Minimum allowed memory is 256 MB.",256),z("Maximum allowed memory is 256 GB.",256*1024)]},{default:n(({props:v})=>[a(S,$({type:"number",label:"Memory (MB)",modelValue:s.value,"onUpdate:modelValue":i[2]||(i[2]=d=>s.value=d),modelModifiers:{number:!0}},v),null,16,["modelValue"])]),_:1},8,["value","rules"]),a(k,{value:m.value,rules:[L("Disk size is required."),F("Disk size must be a valid integer."),H("Minimum allowed disk size is 1 GB.",1),z("Maximum allowed disk size is 10000 GB.",1e4)]},{default:n(({props:v})=>[a(S,$({type:"number",label:"Disk (GB)",modelValue:m.value,"onUpdate:modelValue":i[3]||(i[3]=d=>m.value=d),modelModifiers:{number:!0}},v),null,16,["modelValue"])]),_:1},8,["value","rules"])])):K("",!0)],64)}}});function ml(t="WR"+de(9)){return{name:t}}const cl={name:"CaproverWorker",components:{SelectSolutionFlavor:ge,SelectFarm:ee}},we=R({...cl,props:{modelValue:null},setup(t){return(e,o)=>{var p,s,m,u,i;const c=y("v-text-field"),r=y("input-validator");return N(),I(U,null,[a(r,{rules:[L("Name is required."),se("Name minimum length is 2 chars.",2),ue("Name max length is 15 chars.",15)],value:e.$props.modelValue.name},{default:n(({props:f})=>[a(c,$({label:"Name",modelValue:e.$props.modelValue.name,"onUpdate:modelValue":o[0]||(o[0]=S=>e.$props.modelValue.name=S)},f),null,16,["modelValue"])]),_:1},8,["rules","value"]),a(ge,{modelValue:e.$props.modelValue.solution,"onUpdate:modelValue":o[1]||(o[1]=f=>e.$props.modelValue.solution=f)},null,8,["modelValue"]),a(ee,{filters:{cpu:(p=e.$props.modelValue.solution)==null?void 0:p.cpu,memory:(s=e.$props.modelValue.solution)==null?void 0:s.memory,publicIp:!0,ssd:(((m=e.$props.modelValue.solution)==null?void 0:m.disk)??0)+J(x)(((u=e.$props.modelValue.solution)==null?void 0:u.cpu)??0,((i=e.$props.modelValue.solution)==null?void 0:i.memory)??0)},modelValue:e.$props.modelValue.farm,"onUpdate:modelValue":o[2]||(o[2]=f=>e.$props.modelValue.farm=f)},null,8,["filters","modelValue"])],64)}}}),pl=C("strong",null,"Add your worker",-1),vl={class:"px-4"},fl=["href"],_l=C("li",null,[_("Go to the "),C("strong",null,"cluster"),_(" tab.")],-1),yl=C("li",null,[_(" Click "),C("strong",null,"Add Self-Hosted Registry"),_(" button then "),C("strong",null,"Enable Self-Hosted Registry"),_(". ")],-1),Sl=C("li",null,[_("Click "),C("strong",null,"Join cluster"),_(" button.")],-1),kl={name:"ManageCaproverWorkerDialog",components:{ManageWorkerDialog:le,CaproverWorker:we,ListTable:W}},Pe=R({...kl,props:{master:null,data:null},emits:["close","update:caprover"],setup(t,{emit:e}){const o=t,c=Z(),r=w([]),p=w(!1),s=w(!1),m=w(ml());function u(v){return v.reduce((d,P)=>d+P.size,0)/1024**3}const i=w();function f(){i.value&&(e("update:caprover",i.value),i.value=void 0)}async function S(v){v.setStatus("deploy");try{const d=await j(c.profile,V.Caprover);await v.validateBalance(d);const P=await Fe(d,{name:m.value.name,deploymentName:o.master.name,cpu:m.value.solution.cpu,memory:m.value.solution.memory,disks:[{name:"data0",size:m.value.solution.disk,mountPoint:"/var/lib/docker"}],flist:"https://hub.grid.tf/tf-official-apps/tf-caprover-main.flist",entryPoint:"/sbin/zinit init",farmId:m.value.farm.farmID,farmName:m.value.farm.name,country:m.value.farm.country,planetary:!0,publicIpv4:!0,envs:[{key:"SWM_NODE_MODE",value:"worker"},{key:"PUBLIC_KEY",value:o.master.env.PUBLIC_KEY}],rootFilesystemSize:x(m.value.solution.cpu,m.value.solution.memory)});i.value=P,s.value=!0,v.setStatus("success",`Successfully add a new worker to Caprover('${o.master.name}') Instance.`)}catch(d){v.setStatus("failed",te(d,"Failed to deploy a caprover worker."))}}async function k(v){p.value=!0;const d=await j(c.profile,V.Caprover);for(const E of r.value){console.log(o.master.name,E.name);try{await ze(d,{deploymentName:o.master.name,name:E.name})}catch(A){console.log("Error while deleting worker",A)}}r.value=[];const P=await ce(d,o.master.name);v(P.slice(1)),e("update:caprover",P),p.value=!1}return(v,d)=>{const P=y("v-card-title"),E=y("v-divider"),A=y("v-card-text"),T=y("v-spacer"),G=y("v-btn"),Y=y("v-card-actions"),M=y("v-card"),q=y("v-dialog");return N(),I(U,null,[a(le,{workers:t.data,selectedWorkers:r.value,deleting:p.value,onClose:d[2]||(d[2]=h=>v.$emit("close")),onDeploy:S,onDelete:k,onBack:f},{title:n(()=>[_("Manage Caprover("+D(v.$props.master.name)+") Workers",1)]),list:n(()=>[a(W,{headers:[{title:"#",key:"index"},{title:"PLACEHOLDER",key:"data-table-select"},{title:"Contract ID",key:"contractId"},{title:"Name",key:"name"},{title:"Public IPv4",key:"publicIP.ip"},{title:"CPU(vCores)",key:"capacity.cpu"},{title:"Memory(MB)",key:"capacity.memory"},{title:"Disk(GB)",key:"disk"}],items:t.data,loading:!1,deleting:p.value,modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=h=>r.value=h)},{["item.index"]:n(({item:h})=>[_(D(t.data.indexOf(h==null?void 0:h.value)+1),1)]),["item.disk"]:n(({item:h})=>[_(D(u(h.value.mounts)),1)]),_:2},1032,["headers","items","deleting","modelValue"])]),deploy:n(()=>[a(we,{modelValue:m.value,"onUpdate:modelValue":d[1]||(d[1]=h=>m.value=h)},null,8,["modelValue"])]),_:1},8,["workers","selectedWorkers","deleting"]),i.value?(N(),O(q,{key:0,modelValue:s.value,"onUpdate:modelValue":d[4]||(d[4]=h=>s.value=h),persistent:"",scrollable:"",width:"500px"},{default:n(()=>[a(M,null,{default:n(()=>[a(P,null,{default:n(()=>[pl]),_:1}),a(E),a(A,null,{default:n(()=>[C("ol",vl,[C("li",null,[_(" Go to "),C("a",{href:"http://captain."+t.master.env.CAPROVER_ROOT_DOMAIN,target:"_blank",class:"app-link"}," Admin Panel ",8,fl),_(". ")]),_l,yl,C("li",null,[_(" Insert worker node public IP "),C("strong",null,D(i.value[i.value.length-1].publicIP.ip),1),_(" and add your private SSH Key. ")]),Sl])]),_:1}),a(E),a(Y,null,{default:n(()=>[a(T),a(G,{color:"error",variant:"tonal",onClick:d[3]||(d[3]=h=>s.value=!1)},{default:n(()=>[_("Close")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):K("",!0)],64)}}}),gl=C("strong",null,"Are you sure you want to delete the following deployments?",-1),wl={name:"TfDeploymentList",components:{VmDeploymentTable:fe,IconActionBtn:g,K8sDeploymentTable:_e,ManageK8SWorkerDialog:ke,ManageCaproverWorkerDialog:Pe}},Cl=R({...wl,props:{projectName:null},setup(t){const e=t,o=[{title:"Full Virtual Machine",value:"Fullvm",imgPath:"images/icons/vm.png"},{title:"Micro Virtual Machine",value:"VM",imgPath:"images/icons/vm.png"},{title:"Kubernetes",value:"Kubernetes",imgPath:"images/icons/kubernetes.png"},{title:"CapRover",value:"CapRover",imgPath:"images/icons/caprover.png"},{title:"Peertube",value:"Peertube",imgPath:"images/icons/peertube.png"},{title:"Funkwhale",value:"Funkwhale",imgPath:"images/icons/funkwhale.png"},{title:"Mattermost",value:"Mattermost",imgPath:"images/icons/mattermost.png"},{title:"Discourse",value:"Discourse",imgPath:"images/icons/discourse.png"},{title:"Taiga",value:"Taiga",imgPath:"images/icons/taiga.png"},{title:"Owncloud",value:"Owncloud",imgPath:"images/icons/owncloud.png"},{title:"Presearch",value:"Presearch",imgPath:"images/icons/presearch.png"},{title:"Subsquid",value:"Subsquid",imgPath:"images/icons/subsquid.png"},{title:"Casperlabs",value:"Casperlabs",imgPath:"images/icons/casperlabs.png"},{title:"Algorand",value:"Algorand",imgPath:"images/icons/algorand.png"},{title:"Node Pilot",value:"NodePilot",imgPath:"images/icons/vm.png"},{title:"Umbrel",value:"Umbrel",imgPath:"images/icons/umbrel.png"},{title:"Wordpress",value:"Wordpress",imgPath:"images/icons/wordpress.png"}],c=Z(),r=w(),p=w(),s=w([]),m=w(!1),u=w(!1),i=w(),f=o.findIndex(P=>P.value===e.projectName),S=w(e.projectName?f:0);X(S,()=>s.value=[]);async function k(){var E;u.value=!1,m.value=!0;const P=await j(c.profile);for(const A of s.value)try{await Ye(B(P,{projectName:A.projectName}),{name:A.deploymentName,projectName:A.projectName})}catch(T){console.log("Error while deleting deployment",T.message)}s.value=[],(E=i.value)==null||E.loadDeployments(),m.value=!1}const{uid:v}=Te(),d=Le();return d==null||d.register(v,()=>{var P;return(P=i.value)==null?void 0:P.loadDeployments}),Ke(()=>d==null?void 0:d.unregister(v)),(P,E)=>{const A=y("d-tabs"),T=y("v-btn"),G=y("weblet-layout"),Y=y("v-card-title"),M=y("v-chip"),q=y("v-card-text"),h=y("v-spacer"),be=y("v-card-actions"),Ne=y("v-card"),De=y("v-dialog");return N(),I(U,null,[a(G,{ref_key:"layout",ref:r},We({title:n(()=>{var l;return[_(" Deployment List "+D(P.$props.projectName?"("+(((l=o.find(b=>b.value===P.$props.projectName))==null?void 0:l.title)??P.$props.projectName)+")":""),1)]}),"footer-actions":n(()=>[a(T,{color:"error",variant:"outlined",disabled:s.value.length===0||m.value,"prepend-icon":"mdi-delete",onClick:E[5]||(E[5]=l=>u.value=!0)},{default:n(()=>[_(" Delete ")]),_:1},8,["disabled"])]),default:n(()=>[a(A,{tabs:o,"model-value":J(S),"onUpdate:modelValue":E[4]||(E[4]=l=>S.value=l),disabled:m.value,destroy:"","hide-tabs":!!P.$props.projectName},{default:n(()=>[a(fe,{projectName:o[J(S)].value,modelValue:s.value,"onUpdate:modelValue":E[1]||(E[1]=l=>s.value=l),deleting:m.value,ref_key:"table",ref:i},{"Fullvm-actions":n(({item:l})=>[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:b=>r.value.openDialog(l==null?void 0:l.value,{SSH_KEY:"Public SSH Key"})},null,8,["onClick"])]),"VM-actions":n(({item:l})=>[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:b=>r.value.openDialog(l==null?void 0:l.value,{SSH_KEY:"Public SSH Key"})},null,8,["onClick"])]),"CapRover-actions":n(({item:l})=>[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:b=>r.value.openDialog(l==null?void 0:l.value,{SWM_NODE_MODE:"Swarm Node Mode",PUBLIC_KEY:"Public SSH Key",CAPROVER_ROOT_DOMAIN:!1,CAPTAIN_IMAGE_VERSION:"Captain Image Version",DEFAULT_PASSWORD:"Default Password",CAPTAIN_IS_DEBUG:"Debug Mode"})},null,8,["onClick"]),a(g,{tooltip:"Admin Panel",color:"info",icon:"mdi-view-dashboard",href:"http://captain."+l.value[0].env.CAPROVER_ROOT_DOMAIN},null,8,["href"]),a(g,{icon:"mdi-cog",tooltip:"Manage Workers",color:"secondary",onClick:b=>p.value=l.value.deploymentName},null,8,["onClick"]),p.value===l.value.deploymentName?(N(),O(Pe,{key:0,master:l.value[0],data:l.value.slice(1),onClose:E[0]||(E[0]=b=>p.value=void 0),"onUpdate:caprover":b=>l.value=b},null,8,["master","data","onUpdate:caprover"])):K("",!0)]),"Peertube-actions":n(({item:l})=>[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:b=>r.value.openDialog(l==null?void 0:l.value,{SSH_KEY:"Public SSH Key",PEERTUBE_ADMIN_EMAIL:"Peertube Admin Email",PT_INITIAL_ROOT_PASSWORD:"Peertube Initial Root Password",PEERTUBE_WEBSERVER_HOSTNAME:"Peertube Webserver Hostname"})},null,8,["onClick"]),a(g,{tooltip:"Preview",color:"info",icon:"mdi-web",href:"https://"+l.value[0].env.PEERTUBE_WEBSERVER_HOSTNAME},null,8,["href"])]),"Funkwhale-actions":n(({item:l})=>[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:b=>r.value.openDialog(l==null?void 0:l.value,{FUNKWHALE_HOSTNAME:"Funkwhale Hostname",DJANGO_SUPERUSER_EMAIL:"Django Superuser Email",DJANGO_SUPERUSER_USERNAME:"Diango Superuser Username",DJANGO_SUPERUSER_PASSWORD:"Django Superuser Password"})},null,8,["onClick"]),a(g,{tooltip:"Preview",color:"info",icon:"mdi-web",href:"https://"+l.value[0].env.FUNKWHALE_HOSTNAME},null,8,["href"])]),"Taiga-actions":n(({item:l})=>[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:b=>r.value.openDialog(l==null?void 0:l.value,{SSH_KEY:"Public SSH Key",DOMAIN_NAME:"Domain Name",ADMIN_USERNAME:"Admin Username",ADMIN_PASSWORD:"Admin Password",ADMIN_EMAIL:"Admin Email",DEFAULT_FROM_EMAIL:"Default Form Email",EMAIL_USE_TLS:"Email Use TLS",EMAIL_USE_SSL:"Email Use SSL",EMAIL_HOST:"Email Host",EMAIL_PORT:"Email Port",EMAIL_HOST_USER:"Email Host User",EMAIL_HOST_PASSWORD:"Email Host Password"})},null,8,["onClick"]),a(g,{tooltip:"Admin Panel",color:"info",icon:"mdi-view-dashboard",href:"http://"+l.value[0].env.DOMAIN_NAME+"/admin/"},null,8,["href"]),a(g,{tooltip:"Preview",color:"secondary",icon:"mdi-web",href:"https://"+l.value[0].env.DOMAIN_NAME},null,8,["href"])]),"Presearch-actions":n(({item:l})=>[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:b=>r.value.openDialog(l==null?void 0:l.value,{SSH_KEY:"Public SSH Key",PRESEARCH_REGISTRATION_CODE:"Presearch Registration Code",PRESEARCH_BACKUP_PRI_KEY:"Presearch Backup Private Key",PRESEARCH_BACKUP_PUB_KEY:"Presearch Backup Public Key"})},null,8,["onClick"])]),"Mattermost-actions":n(({item:l})=>[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:b=>r.value.openDialog(l==null?void 0:l.value,{DB_PASSWORD:"Database Password",SITE_URL:"Site URL",SMTPUsername:"SMTP Username",SMTPPassword:"SMTP Password",SMTPServer:"SMTP Server",SMTPPort:"SMTP Port",SSH_KEY:"Public SSH Key",MATTERMOST_DOMAIN:"Mattermost Domain"})},null,8,["onClick"]),a(g,{tooltip:"Preview",color:"info",icon:"mdi-web",href:l.value[0].env.SITE_URL},null,8,["href"])]),"Discourse-actions":n(({item:l})=>[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:b=>r.value.openDialog(l==null?void 0:l.value,{SSH_KEY:"Public SSH Key",DISCOURSE_HOSTNAME:"Discourse Hostname",DISCOURSE_DEVELOPER_EMAILS:"Discourse Developer Emails",DISCOURSE_SMTP_ADDRESS:"Discourse SMTP Address",DISCOURSE_SMTP_PORT:"Discourse SMTP Port",DISCOURSE_SMTP_ENABLE_START_TLS:"Discourse SMTP Enable Start TLS",DISCOURSE_SMTP_USER_NAME:"Discourse SMTP Username",DISCOURSE_SMTP_PASSWORD:"Discourse SMTP Password",THREEBOT_PRIVATE_KEY:"Threebot Private Key",FLASK_SECRET_KEY:"Flask Secret Key"})},null,8,["onClick"]),a(g,{tooltip:"Preview",color:"info",icon:"mdi-web",href:"https://"+l.value[0].env.DISCOURSE_HOSTNAME},null,8,["href"])]),"Casperlabs-actions":n(({item:l})=>[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:b=>r.value.openDialog(l==null?void 0:l.value,{SSH_KEY:"Public SSH Key",CASPERLABS_HOSTNAME:"Casperlabs Hostname"})},null,8,["onClick"]),a(g,{tooltip:"Preview",color:"info",icon:"mdi-web",href:"https://"+l.value[0].env.CASPERLABS_HOSTNAME},null,8,["href"])]),"Owncloud-actions":n(({item:l})=>[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:b=>r.value.openDialog(l==null?void 0:l.value,{SSH_KEY:"Public SSH Key",OWNCLOUD_DOMAIN:"Owncloud Domain",OWNCLOUD_ADMIN_USERNAME:"Owncloud Admin Username",OWNCLOUD_ADMIN_PASSWORD:"Owncloud Admin Password",OWNCLOUD_MAIL_SMTP_SECURE:"Owncloud Mail SMTP Secure",OWNCLOUD_MAIL_DOMAIN:"Owncloud Mail Domain",OWNCLOUD_MAIL_FROM_ADDRESS:"Owncloud Mail From Address",OWNCLOUD_MAIL_SMTP_HOST:"Owncloud Mail SMTP Host",OWNCLOUD_MAIL_SMTP_PORT:"Owncloud Mail SMTP Port",OWNCLOUD_MAIL_SMTP_NAME:"Owncloud Mail SMTP Name",OWNCLOUD_MAIL_SMTP_PASSWORD:"Owncloud Mail SMTP Password"})},null,8,["onClick"]),a(g,{tooltip:"Preview",color:"info",icon:"mdi-web",href:"https://"+l.value[0].env.OWNCLOUD_DOMAIN},null,8,["href"])]),"Subsquid-actions":n(({item:l})=>[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:b=>r.value.openDialog(l==null?void 0:l.value,{SSH_KEY:"Public SSH Key",CHAIN_ENDPOINT:"Chain Endpoint",SUBSQUID_WEBSERVER_HOSTNAME:"Subsquid Webserver Hostname"})},null,8,["onClick"]),a(g,{tooltip:"Preview",color:"info",icon:"mdi-web",href:"https://"+l.value[0].env.SUBSQUID_WEBSERVER_HOSTNAME+"/graphql"},null,8,["href"])]),"Algorand-actions":n(({item:l})=>[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:b=>r.value.openDialog(l==null?void 0:l.value,{SSH_KEY:"Public SSH Key",NETWORK:"Network",NODE_TYPE:"Node Type",ACCOUNT_MNEMONICS:"Account Mnemonics",FIRST_ROUND:"First Round",LAST_ROUND:"Last Round"})},null,8,["onClick"])]),"NodePilot-actions":n(({item:l})=>{var b;return[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:Ee=>r.value.openDialog(l==null?void 0:l.value,{SSH_KEY:"Public SSH Key"})},null,8,["onClick"]),a(g,{tooltip:"Visit",color:"info",icon:"mdi-web",href:"http://"+((b=l.value[0].publicIP)!=null&&b.ip?l.value[0].publicIP.ip.slice(0,-3):"["+l.value[0].planetary+"]")},null,8,["href"])]}),"Umbrel-actions":n(({item:l})=>{var b;return[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:Ee=>r.value.openDialog(l==null?void 0:l.value,{SSH_KEY:"Public SSH Key",USERNAME:"Username",PASSWORD:"Password",UMBREL_DISK:"Umbrel Disk"})},null,8,["onClick"]),a(g,{tooltip:"Admin Panel",color:"info",icon:"mdi-view-dashboard",href:"http://"+((b=l.value[0].publicIP)!=null&&b.ip?l.value[0].publicIP.ip.slice(0,-3):"["+l.value[0].planetary+"]")},null,8,["href"])]}),"Wordpress-actions":n(({item:l})=>[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:b=>r.value.openDialog(l==null?void 0:l.value,{SSH_KEY:"Public SSH Key",MYSQL_USER:"Mysql User",MYSQL_PASSWORD:"Mysql Password",ADMIN_EMAIL:"Admin Email",WP_URL:"WP URL"})},null,8,["onClick"]),a(g,{tooltip:"Preview",color:"info",icon:"mdi-web",href:"https://"+l.value[0].env.WP_URL},null,8,["href"]),a(g,{tooltip:"Admin Panel",color:"secondary",icon:"mdi-view-dashboard",href:"https://"+l.value[0].env.WP_URL+"/wp-admin"},null,8,["href"])]),_:1},8,["projectName","modelValue","deleting"])]),Kubernetes:n(()=>[a(_e,{projectName:o[J(S)].value,modelValue:s.value,"onUpdate:modelValue":E[3]||(E[3]=l=>s.value=l),deleting:m.value,ref_key:"table",ref:i},{actions:n(({item:l})=>[a(g,{tooltip:"Show Details",icon:"mdi-information-outline",onClick:b=>r.value.openDialog(l==null?void 0:l.value,{SSH_KEY:"Public SSH Key",K3S_TOKEN:"K3S Token",K3S_DATA_DIR:"K3S Data Directory",K3S_FLANNEL_IFACE:"K3S Flannel Iface",K3S_NODE_NAME:"K3S Node Name",K3S_URL:"K3S URL"})},null,8,["onClick"]),a(g,{icon:"mdi-cog",tooltip:"Manage Workers",color:"secondary",onClick:b=>p.value=l.value.deploymentName},null,8,["onClick"]),p.value===l.value.deploymentName?(N(),O(ke,{key:0,data:l.value,onClose:E[2]||(E[2]=b=>p.value=void 0),"onUpdate:k8s":b=>l.value.workers=b.workers},null,8,["data","onUpdate:k8s"])):K("",!0)]),_:1},8,["projectName","modelValue","deleting"])]),_:1},8,["model-value","disabled","hide-tabs"])]),_:2},[P.$props.projectName?void 0:{name:"subtitle",fn:n(()=>[_(" List your own deployments for different solutions ")]),key:"0"}]),1536),a(De,{modelValue:u.value,"onUpdate:modelValue":E[7]||(E[7]=l=>u.value=l),scrollable:"",persistent:"",width:"50%"},{default:n(()=>[a(Ne,null,{default:n(()=>[a(Y,null,{default:n(()=>[gl]),_:1}),a(q,null,{default:n(()=>[(N(!0),I(U,null,me(s.value,l=>(N(),O(M,{class:"ma-1",color:"primary",key:l.deploymentName},{default:n(()=>[_(D(l.deploymentName),1)]),_:2},1024))),128))]),_:1}),a(be,null,{default:n(()=>[a(h),a(T,{color:"error",variant:"outlined",onClick:k},{default:n(()=>[_("Delete")]),_:1}),a(T,{color:"error",variant:"tonal",onClick:E[6]||(E[6]=l=>u.value=!1)},{default:n(()=>[_("Close")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});export{Cl as _,ye as a,Se as b,nl as c,Vl as d,we as e,ml as f,ge as g,Ge as h,El as i,Dl as l,Ml as r};
