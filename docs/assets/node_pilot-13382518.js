import{d as B,u as I,r as p,a as $,b as u,o as x,c as z,w as o,g as y,e as v,f as a,h as b,m as j,i as q,j as P,k as V,l as g,n as w,p as F,q as T,s as S,y as E,z as G,_ as H,A as K,F as Y}from"./index-db529f9f.js";import{_ as h,P as M,d as A}from"./root_fs-a2832d70.js";import{_ as Q}from"./tf_deployment_list.vue_vue_type_script_setup_true_lang-584738f9.js";import"./list_table.vue_vue_type_script_setup_true_lang-4e0f8b23.js";const R=S("a",{class:"app-link",href:"https://manual.grid.tf/weblets/weblets_nodepilot.html",target:"_blank"}," Quick start documentation ",-1),J={name:"NodePilot",components:{SelectFarmId:h}},O=B({...J,setup(k){const l=I(),c=p(!1),f=$(),r=p("NP"+y(8)),i=p(8),n=p(8192),s=p();async function C(){l.value.setStatus("deploy");const N=M.NodePilot.toLowerCase();try{const e=await E(f.profile,N);await l.value.validateBalance(e);const m=await A(e,{name:r.value,machines:[{name:r.value,cpu:i.value,memory:n.value,flist:"https://hub.grid.tf/tf-official-vms/node-pilot-zdbfs.flist",entryPoint:"/",farmId:s.value.farmID,farmName:s.value.name,country:s.value.country,publicIpv4:!0,publicIpv6:!0,planetary:!1,envs:[{key:"SSH_KEY",value:f.profile.ssh}],rootFilesystemSize:2,disks:[{size:15,mountPoint:"/mnt/"+y(10)},{size:15,mountPoint:"/mnt/"+y(10)}]}]});l.value.reloadDeploymentsList(),l.value.setStatus("success","Successfully deployed a node pilot instance."),l.value.openDialog(m,{SSH_KEY:"Public SSH Key"})}catch(e){l.value.setStatus("failed",G(e,"Failed to deploy a Node Pilot instance."))}}return(N,e)=>{const m=u("v-text-field"),_=u("input-validator"),L=u("form-validator"),U=u("v-btn"),D=u("weblet-layout");return x(),z(D,{ref_key:"layout",ref:l},{title:o(()=>[v("Deploy a Node Pilot")]),subtitle:o(()=>[v(" Deploy a new Node Pilot on the Threefold Grid "),R,v(" . ")]),"footer-actions":o(()=>[a(U,{color:"primary",variant:"tonal",onClick:C,disabled:!c.value},{default:o(()=>[v(" Deploy ")]),_:1},8,["disabled"])]),default:o(()=>[a(L,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=t=>c.value=t)},{default:o(()=>[a(_,{value:r.value,rules:[b("Name is required."),j("Name minLength is 2 chars.",2),q("Name maxLength is 15 chars.",15)]},{default:o(({props:t})=>[a(m,P({label:"Name",modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=d=>r.value=d)},t),null,16,["modelValue"])]),_:1},8,["value","rules"]),a(_,{value:i.value,rules:[b("CPU is required."),V("CPU must be a valid integer."),g("CPU min is 2 cores.",2),w("CPU max is 32 cores.",32)]},{default:o(({props:t})=>[a(m,P({label:"CPU (vCores)",type:"number",modelValue:i.value,"onUpdate:modelValue":e[1]||(e[1]=d=>i.value=d),modelModifiers:{number:!0}},t),null,16,["modelValue"])]),_:1},8,["value","rules"]),a(_,{value:n.value,rules:[b("Memory is required."),V("Memory must be a valid integer."),g("Minimum allowed memory is 256 MB.",256),w("Maximum allowed memory is 256 GB.",256*1024)]},{default:o(({props:t})=>[a(m,P({label:"Memory (MB)",type:"number",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=d=>n.value=d),modelModifiers:{number:!0}},t),null,16,["modelValue"])]),_:1},8,["value","rules"]),a(h,{filters:{cpu:i.value,memory:n.value,ssd:32,publicIp:!0},modelValue:F(s),"onUpdate:modelValue":e[3]||(e[3]=t=>T(s)?s.value=t:null)},null,8,["filters","modelValue"])]),_:1},8,["modelValue"])]),_:1},512)}}}),W={name:"NodePilotView",components:{NodePilot:O,TfDeploymentList:Q},setup(){return{name:M.NodePilot}}},X={class:"mt-4"};function Z(k,l,c,f,r,i){const n=u("NodePilot"),s=u("TfDeploymentList");return x(),K(Y,null,[a(n),S("div",X,[a(s,{"project-name":f.name},null,8,["project-name"])])],64)}const le=H(W,[["render",Z]]);export{le as default};
